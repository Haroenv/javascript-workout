{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","presentation/js/src/script.js","data.json","presentation/js/src/classes/HeartRateCanvas.js","presentation/js/src/classes/MobileServerBridge.js","presentation/js/src/classes/Presentation.js","presentation/js/src/classes/childapps/ChildApp.js","presentation/js/src/classes/config/index.js","presentation/js/src/classes/sensors/PolarH7.js","presentation/js/src/classes/slides/ContentBase.js","presentation/js/src/classes/slides/highest-heartrate-game/GameCharacter.js","presentation/js/src/classes/slides/lowest-heartrate-game/GameCharacter.js","presentation/js/src/classes/slides/spacebrew-dance-game/DanceGameButton.js","presentation/js/src/classes/slides/spacebrew-dance-game/ScoreBar.js","shared/js/Constants.js","shared/js/classes/slides/ContentBase.js","shared/js/classes/IFrameBridge.js","shared/js/classes/MobileServerBridge.js","shared/js/classes/Presentation.js","presentation/js/src/classes/slides/childapp-editor/index.js","presentation/js/src/classes/slides/highest-heartrate-game/index.js","presentation/js/src/classes/slides/intro-poster/index.js","presentation/js/src/classes/slides/lowest-heartrate-game/index.js","presentation/js/src/classes/slides/react-phones/index.js","presentation/js/src/classes/slides/shake-your-phones/index.js","presentation/js/src/classes/slides/spacebrew-dance-game/index.js","presentation/js/src/classes/slides/title/index.js","presentation/js/src/classes/slides/video-slide/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACppBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"script.min.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function(){\n\n\tvar Presentation = require('./classes/Presentation');\n\tvar data = require('../../../data.json');\n\n  function init() {\n  \tif($('#presentation').length > 0) {\n  \t\tnew Presentation(data, 'presentation');\n  \t}\n  }\n\n\tinit();\n\n})();","module.exports={\n\t\"slides\": [\n\t\t{\n\t\t\t\"name\": \"title-slide\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/title.html\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Hello\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"intro-poster\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Hello\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"010-intro-01\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.002.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Hello\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"010-showreel\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Devine+Showreel\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"010-intro-03\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.004.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Hello\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-00\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.005.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-01\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.006.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-02\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.007.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-03\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.008.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-04\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.009.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-05\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.010.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-06\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.011.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-07\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.012.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-08\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.013.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-09\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.014.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-10\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.015.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-11\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.016.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-12\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.017.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-13\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.018.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-14\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.019.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-15\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.020.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-16\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.021.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-17\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.022.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ble-explanation-18\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.023.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"020-noble-000\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.024.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"020-noble-001\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"020-noble-002\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"020-noble-003\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"020-noble-004\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"020-noble-005\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"020-noble-006\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"020-noble-007\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"020-noble-008\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=BLE\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"pulse-explanation-01\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.033.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Pulse+Sensor\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"pulse-explanation-02\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.034.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Pulse+Sensor\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"pulse-explanation-03\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.035.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Pulse+Sensor\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"pulse-explanation-04\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.036.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Pulse+Sensor\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"pulse-explanation-05\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.037.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Pulse+Sensor\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"pulse-explanation-06\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.038.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Pulse+Sensor\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"pulse-explanation-07\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.039.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Pulse+Sensor\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"pulse-explanation-08\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.040.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Pulse+Sensor\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"030-pulse-001\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Pulse+Sensor\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"030-pulse-002\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Pulse+Sensor\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"shake-your-phones\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"highest-heartrate-game\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Highest+Heartrate+Game\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"lowest-heartrate-game\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Lowest+Heartrate+Game\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"firmata-explanation-01\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.044.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Firmata\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"firmata-explanation-02\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.045.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Firmata\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"firmata-explanation-03\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.046.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Firmata\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"firmata-explanation-04\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.047.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Firmata\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"firmata-explanation-05\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.048.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Firmata\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"firmata-arduino-led\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Firmata+Demo\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"firmata-arduino-servo\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Firmata+Demo\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"firmata-arduino-sensor\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Firmata+Demo\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"cylon-explanation-01\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.050.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=CylonJS\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"cylon-explanation-02\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.051.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=CylonJS\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"cylon-led\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Cylon+Demo\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"cylon-servo\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Cylon+Demo\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"cylon-sensor\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Cylon+Demo\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"cylon-leap\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Cylon+Demo\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"cylon-opencv\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Cylon+Demo\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"050-tessel-explanation-01\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.053.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Tessel\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"tessel-onboard-led\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Tessel\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"tessel-gpio-led\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Tessel\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"050-tessel-explanation-03\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.056.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Tessel\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"tessel-accel\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Tessel\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"tessel-ambient\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Tessel\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"tessel-ambient-trigger\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Tessel\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"tessel-ambient-trigger-led\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Tessel\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"spacebrew-explanation-01\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.061.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"spacebrew-explanation-02\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.062.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"spacebrew-explanation-03\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.063.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"spacebrew-explanation-04\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.064.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"spacebrew-explanation-05\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.065.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"spacebrew-explanation-07\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.066.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"spacebrew-explanation-08\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.067.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"spacebrew-explanation-09\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.068.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"spacebrew-explanation-10\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.069.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"spacebrew-explanation-11\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.070.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"060-spacebrew-yun-setup\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"060-spacebrew-yun-loop\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"060-spacebrew-client-demo\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"react-phones\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"060-spacebrew-arduino-dance\",\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Spacebrew\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"thank-you\",\n\t\t\t\"presentation\": {\n\t\t\t\t\"url\": \"slides/image.html?image=images/keynote/keynote.073.png\"\n\t\t\t},\n\t\t\t\"mobile\": {\n\t\t\t\t\"url\": \"slides/text.html?text=Thank+You\"\n\t\t\t}\n\t\t}\n\t]\n}","module.exports = (function(){\n\n\tfunction HeartRateCanvas(canvas) {\n\t\tthis.pixelsPerBeatAt60BPM = 100;\n\t\tthis.frameNr = 0;\n\t\tthis.fps = 60;\n\t\tthis.numValues = 0;\n\t\tthis.numValuesMargin = 9;\n\t\tthis.numValuesWithMargin = 9;\n\t\tthis.heartRate = 0;\n\t\tthis.backgroundColor = '#fff';\n\t\tthis.strokeColor = '#00f';\n\n\t\tthis.canvas = canvas;\n\t\tthis.width = this.canvas.width;\n\t\tthis.height = this.canvas.height;\n\t\tthis._initSizeDependedVariables();\n\n\t\tthis.heartRateTickInterval = Math.round(this.fps * 60 / this.heartRate);\n\n\t\tthis.stage = new createjs.Stage(this.canvas);\n\t\t\n\t\tthis.drawingShape = new createjs.Shape();\n\t\tthis.stage.addChild(this.drawingShape);\n\n\t\tcreatejs.Ticker.timingMode = createjs.Ticker.RAF_SYNCHED;\n\t\tcreatejs.Ticker.setFPS(this.fps);\n\t\tthis._tick = $.proxy(this.tick, this);\n\t\tcreatejs.Ticker.addEventListener(\"tick\", this._tick);\n\t}\n\n\tHeartRateCanvas.prototype.resize = function(w, h) {\n\t\tthis.width = this.canvas.width = w;\n\t\tthis.height = this.canvas.height = h;\n\t\tthis._initSizeDependedVariables();\n\t};\n\n\tHeartRateCanvas.prototype._initSizeDependedVariables = function() {\n\t\tthis.numValues = Math.round(this.width * 0.80);\n\t\tthis.numValuesWithMargin = this.numValues + this.numValuesMargin;\n\t\tif(!this.values) {\n\t\t\tthis.values = [];\n\t\t}\n\t\tthis.values.length = this.numValuesWithMargin;\n\t\tthis.canvasVerticalCenter = this.height / 2;\n\t};\n\n\tHeartRateCanvas.prototype.dispose = function() {\n\t\tcreatejs.Ticker.removeEventListener(\"tick\", this._tick);\n\t};\n\n\tHeartRateCanvas.prototype.tick = function() {\n\t\tthis.frameNr++;\n\n\t\tthis.drawingShape.graphics.clear()\n\t\t\t//.beginFill(this.backgroundColor)\n\t\t\t//.drawRect(0, 0, this.width, this.height)\n\t\t\t//.endFill()\n\t\t\t.beginStroke(this.strokeColor);\n\n\t\tthis.drawingShape.graphics.moveTo(0, this.canvasVerticalCenter - (this.canvasVerticalCenter * this.values[0]));\n\t\tfor(var i = 1; i < this.numValues; i++) {\n\t\t\tthis.drawingShape.graphics.lineTo(i, this.canvasVerticalCenter - (this.canvasVerticalCenter * this.values[i]));\n\t\t}\n\t\tthis.drawingShape.graphics.endStroke();\n\n\t\tthis.drawingShape.graphics.beginFill(this.strokeColor)\n\t\t\t.drawCircle(this.numValues - 1, this.canvasVerticalCenter - (this.canvasVerticalCenter * this.values[this.numValues - 1]), 2)\n\t\t\t.endFill();\n\n\t\t//does the tick align with a beat?\n\t\tif(this.heartRate > 0 && this.frameNr % this.heartRateTickInterval === 0) {\n\t\t\tthis.frameNr = 0;//reset to zero\n\t\t\tvar strength = 0.7 + Math.random() * 0.3;\n\t\t\tthis.values[this.numValuesWithMargin - this.numValuesMargin - 1] = 0.05 * strength;\n\t\t\tthis.values[this.numValuesWithMargin - this.numValuesMargin + 0] = 0.1 * strength;\n\t\t\tthis.values[this.numValuesWithMargin - this.numValuesMargin + 1] = 0.3 * strength;\n\t\t\tthis.values[this.numValuesWithMargin - this.numValuesMargin + 2] = 1 * strength;\n\t\t\tthis.values[this.numValuesWithMargin - this.numValuesMargin + 3] = 0 * strength;\n\t\t\tthis.values[this.numValuesWithMargin - this.numValuesMargin + 4] = -1 * strength;\n\t\t\tthis.values[this.numValuesWithMargin - this.numValuesMargin + 5] = -0.3 * strength;\n\t\t\tthis.values[this.numValuesWithMargin - this.numValuesMargin + 6] = -0.1 * strength;\n\t\t\tthis.values[this.numValuesWithMargin - this.numValuesMargin + 7] = -0.05 * strength;\n\t\t\tthis.values[this.numValuesWithMargin - this.numValuesMargin + 8] = 0 * strength;\n\t\t}\n\n\t\tthis.values.shift();\n\t\tthis.values.shift();\n\t\tthis.values.push(Math.random() * 0.05 - 0.1);\n\t\tthis.values.push(Math.random() * 0.05 - 0.1);\n\n\t\tthis.stage.update();\n\t};\n\n\tHeartRateCanvas.prototype.updateHeartRate = function(heartRate) {\n\t\tthis.heartRate = heartRate;\n\t\tif(this.heartRate > 0) {\n\t\t\tthis.heartRateTickInterval = Math.round(this.fps * 60 / this.heartRate);\n\t\t}\n\t};\n\n\treturn HeartRateCanvas;\n\n})();","module.exports = (function(){\n\n\tvar MobileServerBridgeBase = require('shared/MobileServerBridge');\n\n\tvar Config = require('./config');\n\tvar Constants = require('Constants');\n\n\tfunction MobileServerBridge(presentation, url) {\n\t\tMobileServerBridgeBase.call(this, presentation, url);\n\t\tbean.on(this.presentation, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChanged.bind(this));\n\t}\n\n\tMobileServerBridge.prototype = Object.create(MobileServerBridgeBase.prototype);\n\n\tMobileServerBridge.prototype.getLoginCredentials = function() {\n\t\treturn {\n\t\t\temail: Config.mobileServerUsername,\n\t\t\tpassword: Config.mobileServerPassword,\n\t\t};\n\t};\n\n\tMobileServerBridge.prototype.socketConnectHandler = function() {\n\t\tMobileServerBridgeBase.prototype.socketConnectHandler.call(this);\n\t\tthis.tryToSend(Constants.MESSAGE, {\n\t\t\ttarget: {\n\t\t\t\tclient: 'mobile',\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\taction: Constants.SET_CURRENT_SLIDE_INDEX,\n\t\t\t\tcurrentSlideIndex: this.presentation.currentSlideIndex\n\t\t\t}\n\t\t});\n\t};\n\n\tMobileServerBridge.prototype.currentSlideIndexChanged = function(currentSlideIndex) {\n\t\tthis.tryToSend(Constants.MESSAGE, {\n\t\t\ttarget: {\n\t\t\t\tclient: 'mobile',\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\taction: Constants.SET_CURRENT_SLIDE_INDEX,\n\t\t\t\tcurrentSlideIndex: currentSlideIndex\n\t\t\t}\n\t\t});\n\t};\n\n\treturn MobileServerBridge;\n\n})();","module.exports = (function(){\n\n\tvar PresentationBase = require('shared/Presentation');\n\n\tvar Constants = require('Constants');\n\tvar Config = require('./config');\n\tvar PolarH7 = require('./sensors/PolarH7');\n\tvar ChildApp = require('./childapps/ChildApp');\n\tvar MobileServerBridge = require('./MobileServerBridge');\n\n\tvar KEYCODE_LEFT = 37;\n\tvar KEYCODE_RIGHT = 39;\n\n\tfunction Presentation(data, role) {\n\t\tPresentationBase.call(this, data, 'presentation');\n\n\t\tthis.elevatorMusicPlaying = false;\n\t\tthis.elevatorMusic = false;\n\n\t\tthis.polarH7 = new PolarH7();\n\t\tthis.polarH7.on(PolarH7.HEART_RATE, this.heartRatePolarHandler.bind(this));\n\n\t\t$('#consoleModal').on('show.bs.modal', function (e) {\n\t\t\tvar w = $('#consoleModal iframe')[0].contentWindow;\n\t\t\tw.postMessage('consoleModalOpen', 'http://localhost:3000');\n\t\t});\n\n\t\tthis.elevatorMusic = $('#elevatormusic')[0];\n\t\t$('.elevator-button').on('click', $.proxy(this.toggleElevatorMusic, this));\n\n\t\t$('.info .ip').text('jsworkout.herokuapp.com');\n\n\t\t$(window).on('keydown', $.proxy(this.keydownHandler, this));\n\n\t\t$('body').on(Constants.GO_TO_PREVIOUS_SLIDE, $.proxy(this.goToPreviousSlide, this));\n\t\t$('body').on(Constants.GO_TO_NEXT_SLIDE, $.proxy(this.goToNextSlide, this));\n\t\t$('body').on(Constants.OPEN_COMMAND_LINE, $.proxy(this.openCommandLine, this));\n\t\t$('body').on(Constants.OPEN_CAMERA, $.proxy(this.openCamera, this));\n\t}\n\n\tPresentation.prototype = Object.create(PresentationBase.prototype);\n\n\tPresentation.prototype.createMobileServerBridge = function() {\n\t\treturn new MobileServerBridge(this, Config.mobileServerUrl);\n\t};\n\n\tPresentation.prototype.toggleElevatorMusic = function() {\n\t\tthis.elevatorMusicPlaying = !this.elevatorMusicPlaying;\n\t\tif(this.elevatorMusicPlaying) {\n\t\t\tthis.elevatorMusic.play();\n\t\t} else {\n\t\t\tthis.elevatorMusic.pause();\n\t\t}\n\t};\n\n\tPresentation.prototype.createIFrameBridges = function(data) {\n\t\tPresentationBase.prototype.createIFrameBridges.call(this, data);\n\t\tvar that = this;\n\t\tvar $slideMenu = $('#slideMenu');\n\t\tvar numIFrameBridges = this.iFrameBridges.length;\n\t\tfor(var i = 0; i < numIFrameBridges; i++) {\n\t\t\tvar iFrameBridge = this.iFrameBridges[i];\n\t\t\t$slideMenu.append('<li><a href=\"#\" data-slidenr=\"' + i + '\">' + (i + 1) + ' ' + iFrameBridge.name + '</a></li>');\n\t\t}\n\t\t$slideMenu.find('a').on('click', function(event){\n\t\t\tevent.preventDefault();\n\t\t\tthat.setCurrentSlideIndex(parseInt($(this).data('slidenr')));\n\t\t});\n\t};\n\n\tPresentation.prototype.iFrameMessageHandler = function(event) {\n\t\tPresentationBase.prototype.iFrameMessageHandler.call(this, event);\n\t\tif(!event.data) {\n\t\t\treturn;\n\t\t}\n\t\tswitch(event.data.action) {\n\t\t\tcase Constants.GO_TO_PREVIOUS_SLIDE:\n\t\t\t\tthis.goToPreviousSlide();\n\t\t\t\tbreak;\n\t\t\tcase Constants.GO_TO_NEXT_SLIDE:\n\t\t\t\tthis.goToNextSlide();\n\t\t\t\tbreak;\n\t\t\tcase Constants.OPEN_COMMAND_LINE:\n\t\t\t\tthis.openCommandLine();\n\t\t\t\tbreak;\n\t\t\tcase Constants.OPEN_CAMERA:\n\t\t\t\tthis.openCamera();\n\t\t\t\tbreak;\n\t\t\tcase Constants.CHILD_APP_SAVE_CODE:\n\t\t\t\tChildApp.getInstance().saveCode(event.data.code, event.data.type);\n\t\t\t\tbreak;\n\t\t\tcase Constants.CHILD_APP_RUN_CODE:\n\t\t\t\tChildApp.getInstance().runCode(event.data.code, event.data.type);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tPresentation.prototype.heartRatePolarHandler = function(heartRate) {\n\t\t$('#global-heart-rate').text(heartRate + ' bpm');\n\t\tvar currentIFrameBridge = this.getIFrameBridgeByIndex(this.currentSlideIndex);\n\t\tif(currentIFrameBridge) {\n\t\t\tcurrentIFrameBridge.tryToPostMessage({\n\t\t\t\taction: Constants.HEART_RATE_POLAR,\n\t\t\t\theartRate: heartRate\n\t\t\t});\n\t\t}\n\t};\n\n\tPresentation.prototype.keydownHandler = function(event) {\n\t\tswitch(event.keyCode) {\n\t\t\tcase KEYCODE_LEFT:\n\t\t\t\tthis.goToPreviousSlide();\n\t\t\t\tbreak;\n\t\t\tcase KEYCODE_RIGHT:\n\t\t\t\tthis.goToNextSlide();\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tPresentation.prototype.openCommandLine = function() {\n\t\t$('#consoleModal').modal('show');\n\t};\n\n\tPresentation.prototype.openCamera = function() {\n\t\t$('#webcamModal').modal('show');\n\t};\n\n\treturn Presentation;\n\n})();","var Config = require('../config'),\n\tevents = requireNode('events'),\n\tfs = requireNode('fs'),\n\tprocess = requireNode('child_process'),\n\tutil = requireNode('util'),\n\tpath = requireNode('path');\n\nfunction ChildApp() {\n\tevents.EventEmitter.call(this);\n\tconsole.log(\"[ChildApp] constructor\");\n}\n\nutil.inherits(ChildApp, events.EventEmitter);\n\nChildApp.getInstance = function() {\n\tif(!ChildApp.instance) {\n\t\tChildApp.instance = new ChildApp();\n\t}\n\treturn ChildApp.instance;\n};\n\nChildApp.prototype.saveCode = function(code, type, cb) {\n\t//if code is running, stop it\n\tif(this.runner) {\n\t\tthis.stop();\n\t\tconsole.log(\"[ChildApp] kill() executed\");\n\t\tsetTimeout(this.saveCode.bind(this, code, type, cb), 500);\n\t} else {\n\t\tvar filePath = Config.childNodeAppFilePath;\n\t\tif(type === 'tessel') {\n\t\t\tfilePath = Config.childTesselAppFilePath;\n\t\t}\n\t\tfs.writeFile(filePath, code, function(err) {\n\t\t\t\tif(err) {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"[ChildApp] The file was saved!\");\n\t\t\t\t\t\tif(cb) {\n\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t});\n\t}\n};\n\nChildApp.prototype.runCode = function(code, type) {\n\tconsole.log(\"[ChildApp] runCode\");\n\t//write code to file & run it\n\tthis.saveCode(code, type, (function(){\n\t\t//run the code\n\t\tif(type === 'tessel') {\n\t\t\tthis.runner = process.spawn(\"tessel\", [\"run\", Config.childTesselAppFilePath], {cwd: path.dirname(Config.childTesselAppFilePath)});\n\t\t} else {\n\t\t\tthis.runner = process.spawn(\"node\", [Config.childNodeAppFilePath], {cwd: path.dirname(Config.childNodeAppFilePath)});\n\t\t}\n\t\tthis.runner.stdout.on('data', this.onRunnerData.bind(this));\n\t\tthis.runner.stderr.on('data', this.onRunnerData.bind(this));\n\t\tthis.runner.on('disconnect', this.onDisconnect.bind(this));\n\t\tthis.runner.on('close', this.onClose.bind(this));\n\t}).bind(this));\n};\n\nChildApp.prototype.stop = function() {\n\tif(this.runner) {\n\t\tthis.runner.stdout.removeAllListeners();\n\t\tthis.runner.stderr.removeAllListeners();\n\t\tthis.runner.stdin.end();\n\t\tthis.runner.kill();\n\t\tthis.runner = false;\n\t}\n};\n\nChildApp.prototype.onRunnerData = function(data) {\n\tconsole.log(data.toString().trim());\n};\n\nChildApp.prototype.onDisconnect = function() {\n\tconsole.log('[ChildApp] runner disconnected');\n\tthis.runner = false;\n};\n\nChildApp.prototype.onClose = function() {\n\tconsole.log('[ChildApp] runner closed');\n\tthis.runner = false;\n};\n\nmodule.exports = ChildApp;","var path = requireNode('path');\n\nvar __dirname = requireNode('./js/src/classes/config/dirname');\n\nvar Config = {};\n\n// Retrieve local ip for Config\nvar ip = '127.0.0.1', ifaces = requireNode('os').networkInterfaces();\nfor (var dev in ifaces) { \n\tif(dev.indexOf('bridge') !== 0) {\n\t\t/* jshint ignore:start */\n\t\tifaces[dev].forEach(function(details) { \n\t\t\tif (details.family === 'IPv4') {\n\t\t\t\tip = details.address; \n\t\t\t}\n\t\t});\n\t\t/* jshint ignore:end */\n\t}\n}\n\nConfig.childNodeAppFilePath = path.normalize(__dirname + '/../../../../../child-app/node/app.js');\nConfig.childTesselAppFilePath = path.normalize(__dirname + '/../../../../../child-app/tessel/app.js');\nConfig.ip = ip;\n\nConfig.mobileServerUrl = \"http://jsworkout.herokuapp.com\";\n//Config.mobileServerUrl = \"http://localhost:5000\";\nConfig.mobileServerUsername = \"wouter.verweirder@gmail.com\";\nConfig.mobileServerPassword = \"geheim\";\n\nmodule.exports = Config;","var events = requireNode('events'),\n\tutil = requireNode('util');\n\nvar POLARH7_HRM_HEART_RATE_SERVICE_UUID = \"180d\";\n\nvar POLARH7_HRM_MEASUREMENT_CHARACTERISTIC_UUID = \"2a37\";\n\nvar serviceUUIDs = [POLARH7_HRM_HEART_RATE_SERVICE_UUID];\n\nfunction PolarH7() {\n\tevents.EventEmitter.call(this);\n\tconsole.log(\"[PolarH7] constructor\");\n\n\tthis.polarH7Peripheral = false;\n\n\tthis._stateChangeHandler = this.stateChangeHandler.bind(this);\n\tthis._discoverHandler = this.discoverHandler.bind(this);\n\n\tthis.noble = requireNode('noble');\n\tthis.noble.on('stateChange', this._stateChangeHandler);\n\tthis.noble.on('discover', this._discoverHandler);\n}\n\nutil.inherits(PolarH7, events.EventEmitter);\n\nPolarH7.HEART_RATE = 'heartRate';\n\nPolarH7.prototype.stateChangeHandler = function(state) {\n\tconsole.log('[PolarH7] stateChange', state);\n\tthis.emit('stateChange', state);\n\tif(state === 'poweredOn') {\n\t\tthis.noble.startScanning(serviceUUIDs);\n\t} else {\n\t\tthis.noble.stopScanning();\n\t}\n};\n\nPolarH7.prototype.discoverHandler = function(peripheral) {\n\tvar foundSuitablePeripheral = false;\n\tfor (var i = peripheral.advertisement.serviceUuids.length - 1; i >= 0; i--) {\n\t\tif(peripheral.advertisement.serviceUuids[i] === POLARH7_HRM_HEART_RATE_SERVICE_UUID) {\n\t\t\tfoundSuitablePeripheral = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(foundSuitablePeripheral) {\n\t\tthis.onFoundSuitablePeripheral(peripheral);\n\t} else {\n\t\tconsole.log('[PolarH7] no suitable peripheral');\n\t}\t\n};\n\nPolarH7.prototype.onFoundSuitablePeripheral = function(peripheral) {\n\tconsole.log(\"[PolarH7]\", peripheral.advertisement.localName);\n\tthis.noble.stopScanning();\n\tthis.polarH7Peripheral = peripheral;\n\tthis.polarH7Peripheral.connect(this.onConnect.bind(this));\n};\n\nPolarH7.prototype.onConnect = function(error) {\n\tconsole.log(\"[PolarH7] on connect\");\n\tthis.emit('connect');\n\tthis.polarH7Peripheral.discoverServices([], this.onPeripheralDiscoverServices.bind(this));\n};\n\nPolarH7.prototype.onPeripheralDiscoverServices = function(error, services) {\n\tconsole.log(\"[PolarH7] onPeripheralDiscoverServices\");\n\tfor (var i = services.length - 1; i >= 0; i--) {\n\t\tif(services[i].name) {\n\t\t\tconsole.log(services[i].uuid, services[i].name);\n\t\t\tservices[i].discoverCharacteristics([], this.onPeripheralServiceDiscoverCharacteristics.bind(this));\n\t\t}\n\t}\t\n};\n\nPolarH7.prototype.onPeripheralServiceDiscoverCharacteristics = function(error, characteristics) {\n\tfunction errorHandler(error){\n\t\tif(error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\tfor (var i = characteristics.length - 1; i >= 0; i--) {\n\t\tvar characteristic = characteristics[i];\n\t\tif(characteristic.uuid === POLARH7_HRM_MEASUREMENT_CHARACTERISTIC_UUID) {\n\t\t\t//console.log(\"HRM Characteristic\");\n\t\t\tcharacteristic.on('read', this.onHeartRateRead.bind(this));\n\t\t\tcharacteristic.notify(true, errorHandler);\n\t\t}\n\t}\n};\n\nPolarH7.prototype.onHeartRateRead = function(data, isNotification) {\n\tif((data[0] & 0x01) === 0) {\n\t\tvar heartRate = data[1];\n\t\tif(heartRate) {\n\t\t\tthis.emit(PolarH7.HEART_RATE, heartRate);\n\t\t}\n\t}\n};\n\nmodule.exports = PolarH7;","module.exports = (function(){\n\n\tvar SharedContentBase = require('shared/ContentBase');\n\tvar Constants = require('Constants');\n\n\tvar KEYCODE_LEFT = 37;\n\tvar KEYCODE_RIGHT = 39;\n\n\tfunction ContentBase(name) {\n\t\tSharedContentBase.call(this, name);\n\t\tthis.slideControlEnabled = true;\n\t\t$(window).on('keydown', this.keydownHandler.bind(this));\t\t\t\n\t}\n\n\tContentBase.prototype = Object.create(SharedContentBase.prototype);\n\n\tContentBase.prototype.keydownHandler = function(event) {\n\t\tif(this.slideControlEnabled) {\n\t\t\tswitch(event.keyCode) {\n\t\t\t\tcase KEYCODE_LEFT:\n\t\t\t\t\tthis.postMessage({action: Constants.GO_TO_PREVIOUS_SLIDE});\n\t\t\t\t\tbreak;\n\t\t\t\tcase KEYCODE_RIGHT:\n\t\t\t\t\tthis.postMessage({action: Constants.GO_TO_NEXT_SLIDE});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn ContentBase;\n\n})();","module.exports = (function(){\n\n\tfunction GameCharacter(spriteSheet) {\n\t\tthis.speedX = 0;\n\t\tthis.speedY = 0;\n\t\tthis.minX = 0;\n\t\tthis.minY = 0;\n\t\tthis.maxX = 0;\n\t\tthis.maxY = 0;\n\t\tthis.finalX = 0;\n\t\tthis.finalY = 0;\n\t\tthis.jumping = false;\n\t\tthis.finalReached = false;\n\t\tthis.state = false;\n\n\t\tthis.sprite = new createjs.Sprite(spriteSheet);\n\t\tthis.sprite.framerate = 12;\n\t}\n\n\tGameCharacter.prototype.setSpeedX = function(value) {\n\t\tvalue = Math.max(0, Math.min(1, value));\n\t\tthis.speedX = value;\n\t};\n\n\tGameCharacter.prototype.jump = function(amount) {\n\t\tif(!this.jumping) {\n\t\t\tthis.jumping = true;\n\t\t\tif(!amount) {\n\t\t\t\tamount = 14;\n\t\t\t}\n\t\t\tthis.speedY = -amount;\n\t\t}\n\t};\n\n\tGameCharacter.prototype.setState = function(value) {\n\t\tif(value !== this.state) {\n\t\t\tthis.state = value;\n\t\t\tswitch(this.state) {\n\t\t\t\tcase \"jumping\":\n\t\t\t\t\tthis.sprite.gotoAndStop(\"jump\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"running\":\n\t\t\t\t\tthis.sprite.gotoAndPlay(\"run\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.sprite.gotoAndStop(\"run\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tGameCharacter.prototype.setCorrectState = function() {\n\t\tif(this.jumping) {\n\t\t\tthis.setState(\"jumping\");\n\t\t} else {\n\t\t\tif(this.speedX > 0) {\n\t\t\t\tthis.setState(\"running\");\n\t\t\t} else {\n\t\t\t\tthis.setState(\"standing\");\n\t\t\t}\n\t\t}\n\t};\n\n\tGameCharacter.prototype.update = function() {\n\t\tvar targetX = this.sprite.x + (this.speedX * 4);\n\t\tvar targetY = this.sprite.y + this.speedY;\n\n\t\tthis.speedY += 1;\n\t\tif(targetY > this.maxY) {\n\t\t\tthis.speedY = 0;\n\t\t\tif(this.jumping) {\n\t\t\t\tthis.jumping = false;\n\t\t\t}\n\t\t}\n\n\t\tthis.setCorrectState();\n\n\t\tthis.sprite.x = Math.round(Math.min(this.maxX, Math.max(this.minX, targetX)));\n\t\tthis.sprite.y = Math.round(Math.min(this.maxY, Math.max(this.minY, targetY)));\n\t};\n\n\treturn GameCharacter;\n\n})();","module.exports = (function(){\n\n\tfunction GameCharacter(spriteSheet) {\n\t\tthis.state = false;\n\t\tthis.heartRate = 0;\n\t\tthis.sprite = new createjs.Sprite(spriteSheet);\n\t\tthis.setState(\"standing\");\n\t}\n\n\tGameCharacter.prototype.setState = function(value) {\n\t\tif(value !== this.state) {\n\t\t\tthis.state = value;\n\t\t\tswitch(this.state) {\n\t\t\t\tcase \"falling\":\n\t\t\t\t\tthis.sprite.framerate = 12;\n\t\t\t\t\tthis.sprite.gotoAndPlay(\"falling\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"kameha\":\n\t\t\t\t\tthis.sprite.gotoAndPlay(\"kameha\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.sprite.framerate = 6;\n\t\t\t\t\tthis.sprite.gotoAndPlay(\"standing\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tGameCharacter.prototype.update = function() {\n\t};\n\n\treturn GameCharacter;\n\n})();","module.exports = (function(){\n\n\tfunction DancegameButton(spriteSheet, color, orientation) {\n\t\tthis.spriteSheet = spriteSheet;\n\t\tthis.color = color;\n\t\tthis.orientation = orientation;\n\n\t\tthis.state = DancegameButton.STATE_NORMAL;\n\n\t\tthis.sprite = new createjs.Sprite(spriteSheet, color);\n\t\tthis.sprite.regX = this.sprite.getBounds().width / 2;\n\t\tthis.sprite.regY = this.sprite.getBounds().height / 2;\n\t\tswitch(orientation) {\n\t\t\tcase \"up\":\n\t\t\tthis.sprite.rotation = 180;\n\t\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\tthis.sprite.rotation = 90;\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tthis.sprite.rotation = 270;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tDancegameButton.prototype.setState = function(state) {\n\t\tif(this.state !== state) {\n\t\t\tthis.state = state;\n\t\t\tswitch(this.state) {\n\t\t\t\tcase DancegameButton.STATE_CORRECT:\n\t\t\t\t\tthis.gotoAndStop(this.color + '-correct');\n\t\t\t\t\tbreak;\n\t\t\t\tcase DancegameButton.STATE_WRONG:\n\t\t\t\t\tthis.gotoAndStop(this.color + '-wrong');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.gotoAndStop(this.color);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tDancegameButton.prototype.gotoAndStop = function(frame) {\n\t\tthis.sprite.gotoAndStop(frame);\n\t};\n\n\tDancegameButton.prototype.update = function(speed) {\n\t\tthis.sprite.y += -speed;\n\t};\n\n\tDancegameButton.STATE_NORMAL = 'normal';\n\tDancegameButton.STATE_CORRECT = 'correct';\n\tDancegameButton.STATE_WRONG = 'wrong';\n\n\treturn DancegameButton;\n\n})();","module.exports = (function(){\n\n\tfunction ScoreBar() {\n\t\tthis.score = 0;\n\t\tthis.display = new createjs.Container();\n\n\t\tvar bgGfx = new createjs.Graphics();\n\t\tbgGfx.s('#fff').dr(0.5, 0.5, 521, 34).es();\n\t\tvar bg = new createjs.Shape(bgGfx);\n\n\t\tvar gradientGfx = new createjs.Graphics();\n\t\tgradientGfx.lf([\"#f00\",\"#0f0\"], [0, 1], 0, 0, 520, 0).dr(0, 0, 520, 33).ef();\n\t\tthis.gradient = new createjs.Shape(gradientGfx);\n\t\tthis.gradient.x = 1;\n\t\tthis.gradient.y = 1;\n\n\t\tthis.gradientMaskGfx = new createjs.Graphics();\n\t\tthis.gradientMaskGfx.f('#fff').dr(0, 0, 520, 33).ef();\n\t\tthis.gradientMask = new createjs.Shape(this.gradientMaskGfx);\n\t\tthis.gradientMask.x = this.gradient.x;\n\t\tthis.gradientMask.y = this.gradient.y;\n\n\t\tthis.gradient.mask = this.gradientMask;\n\n\t\tthis.gradientMask.scaleX = 0;\n\n\t\tthis.display.addChild(bg, this.gradient);\n\t}\n\n\tScoreBar.prototype.setScore = function(value) {\n\t\tvalue = Math.min(1, Math.max(0, value));\n\t\tif(value !== this.score) {\n\t\t\tthis.score = value;\n\t\t}\n\t};\n\n\tScoreBar.prototype.update = function() {\n\t\tthis.gradientMask.scaleX += (this.score - this.gradientMask.scaleX) * 0.05;\n\t};\n\n\treturn ScoreBar;\n\n})();","module.exports = (function(){\n\t\n\tvar Constants = {\n\t\tGO_TO_PREVIOUS_SLIDE : 'goToPreviousSlide',\n\t\tGO_TO_NEXT_SLIDE : 'goToNextSlide',\n\t\tSET_SLIDES : 'setSlides',\n\t\tSET_CURRENT_SLIDE_INDEX : 'setCurrentSlideIndex',\n\n\t\tMESSAGE : 'message',\n\t\tSOCKET_SEND : 'socketSend',\n\t\tSOCKET_RECEIVE : 'socketReceive',\n\t\tJOIN_SLIDE_ROOM : 'joinSlideRoom',\n\t\tLEAVE_SLIDE_ROOM : 'leaveSlideRoom',\n\n\t\tROLE_PRESENTATION : 'presentation',\n\t\tROLE_MOBILE : 'mobile',\n\n\t\tSTATE_ACTIVE : 'active',\n\t\tSTATE_INACTIVE : 'inactive',\n\n\t\tSET_SUBSTATE : 'setSubstate',\n\n\t\tSHAKE_YOUR_PHONES_INTRO : 'shakeYourPhonesIntro',\n\t\tSHAKE_YOUR_PHONES_GAME : 'shakeYourPhonesGame',\n\t\tSHAKE_YOUR_PHONES_FINISHED : 'shakeYourPhonesFinished',\n\n\t\tSHAKE_YOUR_PHONES_CLIENT_ADDED : 'shakeYourPhonesClientAdded',\n\t\tSHAKE_YOUR_PHONES_CLIENT_REMOVED : 'shakeYourPhonesClientRemoved',\n\t\tSHAKE_YOUR_PHONES_CLIENT_LIST : 'shakeYourPhonesClientList',\n\t\tSHAKE_YOUR_PHONES_CLIENT_UPDATE : 'shakeYourPhonesClientUpdate',\n\n\t\tHIGHEST_HEARTRATE_GAME_INTRO : 'highestHeartrateGameIntro',\n\t\tHIGHEST_HEARTRATE_GAME_GAME : 'highestHeartrateGameGame',\n\t\tHIGHEST_HEARTRATE_GAME_FINISHED : 'highestHeartrateGameFinished',\n\n\t\tLOWEST_HEARTRATE_GAME_INTRO : 'lowestHeartrateGameIntro',\n\t\tLOWEST_HEARTRATE_GAME_GAME : 'lowestHeartrateGameGame',\n\t\tLOWEST_HEARTRATE_GAME_FINISHED : 'lowestHeartrateGameFinished',\n\n\t\tREACT_PHONES_INTRO : 'reactPhonesIntro',\n\t\tREACT_PHONES_GAME : 'reactPhonesGame',\n\t\tREACT_PHONES_FINISHED : 'reactPhonesFinished',\n\n\t\tREACT_PHONES_CLIENT_ADDED : 'reactPhonesClientAdded',\n\t\tREACT_PHONES_CLIENT_REMOVED : 'reactPhonesClientRemoved',\n\t\tREACT_PHONES_CLIENT_LIST : 'reactPhonesClientList',\n\t\tREACT_PHONES_CLIENT_UPDATE : 'reactPhonesClientUpdate',\n\n\t\tDANCE_PAD_GAME_INTRO : 'dancePadGameIntro',\n\t\tDANCE_PAD_GAME_GAME : 'dancePadGameGame',\n\t\tDANCE_PAD_GAME_FINISHED : 'dancePadGameFinished',\n\n\t\tUPDATE_MAXIMUM_MOTION : 'updateMaximumMotion',\n\t\tUPDATE_REACTION_SPEED : 'updateReactionSpeed',\n\t\tHEART_RATE_POLAR : 'heartRatePolar',\n\t\tHEART_RATE_SPARK : 'heartRateSpark',\n\t\tSELECT_WINNER : 'selectWinner',\n\t\tBLINK : 'blink',\n\n\t\tTWEET : 'tweet',\n\t\tGET_ALL_TWEETS : 'getAllTweets',\n\t\tGET_ALL_TWEETS_RESULT : 'getAllTweetsResult',\n\n\t\tCHILD_APP_SAVE_CODE : 'childAppSaveCode',\n\t\tCHILD_APP_RUN_CODE : 'childAppRunCode',\n\t\tOPEN_COMMAND_LINE: 'openCommandLine',\n\t\tOPEN_CAMERA: 'openCamera'\n\t};\n\n\treturn Constants;\n\n})();","module.exports = (function(){\n\t\n\tvar Constants = require('Constants');\n\n\tfunction ContentBase(name) {\n\t\tthis.name = name;\n\t\tthis.fps = 60;\n\t\tthis._animationFrameId = false;\n\t\tthis._currentTime = 0;\n\t\tthis._delta = 0;\n\t\tthis._interval = false;\n\t\tthis._lastTime = new Date().getTime();\n\t\tthis.currentFrame = 0;\n\n\t\twindow.addEventListener(\"message\", this.receiveMessage.bind(this), false);\n\n\t\tthis.__drawLoop = this._drawLoop.bind(this);\n\t\tthis._interval = 1000 / this.fps;\n\t}\n\n\tContentBase.prototype.receiveMessage = function(event) {\n\t\tif(!event.data) {\n\t\t\treturn;\n\t\t}\n\t\tswitch(event.data.action) {\n\t\t\tcase 'setState':\n\t\t\t\tthis.setState(event.data.state);\n\t\t\t\tbreak;\n\t\t\tcase Constants.SOCKET_RECEIVE:\n\t\t\t\tthis.receiveSocketMessage(event.data.message);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.handleMessage(event.data);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tContentBase.prototype.postMessage = function(data) {\n\t\tparent.postMessage(data, \"*\");\n\t};\n\n\tContentBase.prototype.handleMessage = function(data) {\n\t};\n\n\tContentBase.prototype.postSocketMessage = function(message) {\n\t\tthis.postMessage({\n\t\t\taction: Constants.SOCKET_SEND,\n\t\t\tmessage: message\n\t\t});\n\t};\n\n\tContentBase.prototype.receiveSocketMessage = function(message) {\n\t\t//console.log('ContentBase.prototype.receiveSocketMessage ' + this.name, message);\n\t};\n\n\tContentBase.prototype.setState = function(state) {\n\t\tif(state !== this.state) {\n\t\t\tthis.state = state;\n\t\t\tthis.onStateChanged();\n\t\t\tif(this.state === Constants.STATE_ACTIVE) {\n\t\t\t\tthis.currentFrame = 0;\n\t\t\t\tthis._drawLoop();\n\t\t\t} else {\n\t\t\t\twindow.cancelAnimationFrame(this._animationFrameId);\n\t\t\t}\n\t\t}\n\t};\n\n\tContentBase.prototype.onStateChanged = function() {\n\t};\n\n\tContentBase.prototype._drawLoop = function() {\n\t\tthis._animationFrameId = window.requestAnimationFrame(this.__drawLoop);\n\t\tthis._currentTime = (new Date()).getTime();\n\t    this._delta = (this._currentTime - this._lastTime);\n\t    if(this._delta > this._interval) {\n\t    \tthis.currentFrame++;\n\t    \tthis.drawLoop(this._delta);\n\t    \tthis._lastTime = this._currentTime - (this._delta % this._interval);\n\t    }\n\t};\n\n\tContentBase.prototype.drawLoop = function(delta) {\n\t};\n\n\treturn ContentBase;\n\n})();","module.exports = (function(){\n\tfunction getIframeWindow(iframe_object) {\n\t\tvar doc;\n\n\t\tif (iframe_object.contentWindow) {\n\t\t\treturn iframe_object.contentWindow;\n\t\t}\n\n\t\tif (iframe_object.window) {\n\t\t\treturn iframe_object.window;\n\t\t} \n\n\t\tif (!doc && iframe_object.contentDocument) {\n\t\t\tdoc = iframe_object.contentDocument;\n\t\t} \n\n\t\tif (!doc && iframe_object.document) {\n\t\t\tdoc = iframe_object.document;\n\t\t}\n\n\t\tif (doc && doc.defaultView) {\n\t\t return doc.defaultView;\n\t\t}\n\n\t\tif (doc && doc.parentWindow) {\n\t\t\treturn doc.parentWindow;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tfunction IFrameBridge(data) {\n\t\tthis.data = data;\n\t\tthis.name = this.data.name;\n\t}\n\n\tIFrameBridge.prototype.isAlreadyCorrectlyAttached = function(iframe, src) {\n\t\treturn (this.iframe === iframe && $(iframe).attr('name') === this.name && $(iframe).attr('src') === src);\n\t};\n\n\tIFrameBridge.prototype.attachToIframe = function(iframe, src, cb) {\n\t\tthis.iframe = iframe;\n\t\t$(iframe).off('load');\n\t\t$(iframe).attr('name', this.name);\n\t\tif(src !== $(iframe).attr('src')) {\n\t\t\t$(iframe).on('load', (function(event){\n\t\t\t\tthis.tryToPostMessage({\n\t\t\t\t\taction: 'setState',\n\t\t\t\t\tstate: this.state\n\t\t\t\t});\n\t\t\t\tcb();\n\t\t\t}).bind(this));\n\t\t\t$(iframe).attr('src', src);\n\t\t}\n\t};\n\n\tIFrameBridge.prototype.setState = function(state) {\n\t\tthis.state = state;\n\t\tthis.tryToPostMessage({\n\t\t\taction: 'setState',\n\t\t\tstate: this.state\n\t\t});\n\t};\n\n\tIFrameBridge.prototype.tryToPostMessage = function(message) {\n\t\tif(!this.iframe) {\n\t\t\treturn;\n\t\t}\n\t\tvar w = getIframeWindow(this.iframe);\n\t\tif(w) {\n\t\t\tw.postMessage(message, \"*\");\n\t\t}\n\t};\n\n\treturn IFrameBridge;\n})();","module.exports = (function(){\n\n\tvar Constants = require('Constants');\n\n\tfunction MobileServerBridge(presentation, url) {\n\t\tthis.presentation = presentation;\n\t\tthis.url = url;\n\t\tthis.connect();\n\t}\n\n\tMobileServerBridge.prototype.connect = function() {\n\t\tconsole.log('MobileServerBridge.connect');\n\t\t$.post(this.url + '/login', this.getLoginCredentials()).done(this.loginHandler.bind(this))\n\t\t.fail((function() {\n\t\t\t//retry after one second\n\t\t\tsetTimeout((function(){\n\t\t\t\tthis.connect();\n\t\t\t}).bind(this), 1000);\n\t  }).bind(this));\n\t};\n\n\tMobileServerBridge.prototype.getLoginCredentials = function() {\n\t\treturn {};\n\t};\n\n\tMobileServerBridge.prototype.loginHandler = function(result) {\n\t\tthis.token = result.token;\n\t\tthis.socket = io(this.url, {\n\t\t\tquery: 'token=' + this.token,\n\t\t\treconnection: false,\n\t\t\tforceNew: true\n\t\t});\n\t\tthis.socket.on('connect', this.socketConnectHandler.bind(this));\n\t\tthis.socket.on('disconnect', this.socketDisconnectHandler.bind(this));\n\t\tthis.socket.on('message', this.socketMessageHandler.bind(this));\n\t};\n\n\tMobileServerBridge.prototype.socketConnectHandler = function() {\n\t\tconsole.log('MobileServerBridge.socketConnectHandler');\n\t\tthis.presentation.mobileServerBridgeConnected();\n\t};\n\n\tMobileServerBridge.prototype.socketDisconnectHandler = function() {\n\t\tthis.connect();\n\t};\n\n\tMobileServerBridge.prototype.tryToSend = function() {\n\t\tif(this.socket) {\n\t\t\tthis.socket.emit.apply(this.socket, arguments);\n\t\t}\n\t};\n\n\tMobileServerBridge.prototype.socketMessageHandler = function(message) {\n\t\tthis.presentation.mobileServerMessageHandler(message);\n\t};\n\n\treturn MobileServerBridge;\n})();","module.exports = (function(){\n\n\tvar Constants = require('Constants');\n\tvar IFrameBridge = require('./IFrameBridge');\n\n\t/*\n\t * data: json object with slides array property\n\t * role: mobile or presentation\n\t */\n\tfunction Presentation(data, role) {\n\t\tthis.data = data;\n\t\tthis.role = role;\n\t\tthis.currentSlideIndex = -1;\n\t\tthis.iframes = [];\n\t\tthis.numIframes = 3;\n\t\tthis.iFrameBridges = [];\n\t\tthis.iFrameBridgesBySlideName = {};\n\n\t\tthis.createIFrames();\n\t\tthis.createIFrameBridges(this.data);\n\n\t\tthis.mobileServerBridge = this.createMobileServerBridge();\n\t\twindow.addEventListener(\"message\", this.iFrameMessageHandler.bind(this), false);\n\n\t\tthis.setCurrentSlideIndex(0);\n\t}\n\n\tPresentation.prototype.createIFrames = function() {\n\t\tfor(var i = 0; i < this.numIframes; i++) {\n\t\t\tvar $iframe = $('<iframe class=\"slide-frame\" />');\n\t\t\tthis.iframes.push($iframe);\n\t\t\t$('#presentation').append($iframe);\n\t\t}\n\t};\n\n\tPresentation.prototype.createIFrameBridges = function(data) {\n\t\tvar that = this;\n\t\tvar numSlides = data.slides.length;\n\t\tfor(var i = 0; i < numSlides; i++) {\n\t\t\tvar iFrameBridge = this.createIframeBridge(data.slides[i]);\n\t\t\tthis.iFrameBridges.push(iFrameBridge);\n\t\t\tthis.iFrameBridgesBySlideName[iFrameBridge.name] = iFrameBridge;\n\t\t}\n\t};\n\n\tPresentation.prototype.createIframeBridge = function(slide) {\n\t\treturn new IFrameBridge(slide);\n\t};\n\n\tPresentation.prototype.iFrameMessageHandler = function(event) {\n\t\tif(!event.data) {\n\t\t\treturn;\n\t\t}\n\t\tswitch(event.data.action) {\n\t\t\tcase Constants.SOCKET_SEND:\n\t\t\t\tif(this.mobileServerBridge) {\n\t\t\t\t\tthis.mobileServerBridge.tryToSend(Constants.MESSAGE, event.data.message);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tPresentation.prototype.mobileServerBridgeConnected = function() {\n\t\t//join the rooms of the iframes\n\t\tfor(var i = 0; i < this.numIframes; i++) {\n\t\t\tthis.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(this.iframes[i]).attr('name'));\n\t\t}\n\t};\n\n\tPresentation.prototype.mobileServerMessageHandler = function(message) {\n\t\tif(message.target.slide) {\n\t\t\t//slide has to handle the message\n\t\t\tvar iFrameBridge = this.getIFrameBridgeBySlideName(message.target.slide);\n\t\t\tif(iFrameBridge) {\n\t\t\t\tiFrameBridge.tryToPostMessage({\n\t\t\t\t\taction: Constants.SOCKET_RECEIVE,\n\t\t\t\t\tmessage: message\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t//presentation has to handle the message\n\t\t\tthis.handleMobileServerMessage(message);\n\t\t}\n\t};\n\n\tPresentation.prototype.handleMobileServerMessage = function(message) {\n\t\tconsole.log('[shared/Presentation] handleMobileServerMessage', message);\n\t};\n\n\tPresentation.prototype.getIFrameBridgeByIndex = function(index) {\n\t\tif(index >= 0 && index < this.iFrameBridges.length) {\n\t\t\treturn this.iFrameBridges[index];\n\t\t}\n\t\treturn false;\n\t};\n\n\tPresentation.prototype.getIFrameBridgeBySlideName = function(slideName) {\n\t\treturn this.iFrameBridgesBySlideName[slideName];\n\t};\n\n\tPresentation.prototype.getIFrameForSlide = function(slide, slidesNotToClear) {\n\t\tif(slide) {\n\t\t\tvar $iframe = $('iframe[name=' + slide.name + ']');\n\t\t\tif($iframe.length > 0) {\n\t\t\t\treturn $iframe[0];\n\t\t\t}\n\t\t\t//get a free iframe\n\t\t\tvar slideNamesNotToClear = [];\n\t\t\t$(slidesNotToClear).each(function(index, obj){\n\t\t\t\tslideNamesNotToClear.push(obj.name);\n\t\t\t});\n\t\t\tvar $iframes = $('iframe.slide-frame');\n\t\t\tfor (var i = $iframes.length - 1; i >= 0; i--) {\n\t\t\t\t$iframe = $($iframes[i]);\n\t\t\t\tvar name = $iframe.attr('name');\n\t\t\t\tif(!name || slideNamesNotToClear.indexOf(name) === -1) {\n\t\t\t\t\treturn $iframe[0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\tPresentation.prototype.goToPreviousSlide = function() {\n\t\tthis.setCurrentSlideIndex(this.currentSlideIndex - 1);\n\t};\n\n\tPresentation.prototype.goToNextSlide = function() {\n\t\tthis.setCurrentSlideIndex(this.currentSlideIndex + 1);\n\t};\n\n\tPresentation.prototype.setCurrentSlideIndex = function(value) {\n\t\tvalue = Math.max(0, Math.min(value, this.iFrameBridges.length - 1));\n\t\tif(value !== this.currentSlideIndex) {\n\t\t\tthis.currentSlideIndex = value;\n\n\t\t\tvar currentIFrameBridge = this.getIFrameBridgeByIndex(this.currentSlideIndex);\n\t\t\tvar previousIFrameBridge = this.getIFrameBridgeByIndex(this.currentSlideIndex - 1);\n\t\t\tvar nextIFrameBridge = this.getIFrameBridgeByIndex(this.currentSlideIndex + 1);\n\n\t\t\tvar currentIframe = this.getIFrameForSlide(currentIFrameBridge, [previousIFrameBridge, nextIFrameBridge]);\n\t\t\tthis.setupIFrame(currentIframe, currentIFrameBridge, Constants.STATE_ACTIVE, 0);\n\n\t\t\tvar previousIframe = this.getIFrameForSlide(previousIFrameBridge, [currentIFrameBridge, nextIFrameBridge]);\n\t\t\tthis.setupIFrame(previousIframe, previousIFrameBridge, Constants.STATE_INACTIVE, '-100%');\n\n\t\t\tvar nextIframe = this.getIFrameForSlide(nextIFrameBridge, [previousIFrameBridge, currentIFrameBridge]);\n\t\t\tthis.setupIFrame(nextIframe, nextIFrameBridge, Constants.STATE_INACTIVE, '100%');\n\n\t\t\t//all other iframe bridges should be unlinked from their iframe\n\t\t\tthis.iFrameBridges.forEach(function(iFrameBridge){\n\t\t\t\tif(iFrameBridge === currentIFrameBridge) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(iFrameBridge === previousIFrameBridge) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(iFrameBridge === nextIFrameBridge) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tiFrameBridge.iframe = null;\n\t\t\t});\n\n\t\t\tbean.fire(this, Constants.SET_CURRENT_SLIDE_INDEX, [this.currentSlideIndex]);\n\t\t}\n\t};\n\n\tPresentation.prototype.setupIFrame = function(iFrame, iFrameBridge, state, left) {\n\t\tif(iFrame) {\n\t\t\tvar src = \"slides/\" + iFrameBridge.name + '.html';\n\t\t\tif(iFrameBridge.data[this.role] && iFrameBridge.data[this.role].url) {\n\t\t\t\tsrc = iFrameBridge.data[this.role].url;\n\t\t\t}\n\t\t\tif(iFrameBridge.isAlreadyCorrectlyAttached(iFrame, src)) {\n\t\t\t\tconsole.log(iFrameBridge.name + ' already attached');\n\t\t\t} else {\n\t\t\t\t//leave previous channel of this iframe\n\t\t\t\tif(this.mobileServerBridge) {\n\t\t\t\t\tthis.mobileServerBridge.tryToSend(Constants.LEAVE_SLIDE_ROOM, $(iFrame).attr('name'));\n\t\t\t\t}\n\t\t\t\t//add the join as a callback for the onload event\n\t\t\t\tiFrameBridge.attachToIframe(iFrame, src, (function(){\n\t\t\t\t\t//join new channel\n\t\t\t\t\tif(this.mobileServerBridge) {\n\t\t\t\t\t\tthis.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(iFrame).attr('name'));\n\t\t\t\t\t}\n\t\t\t\t}).bind(this));\n\t\t\t}\n\t\t\tiFrameBridge.setState(state);\n\t\t\t$(iFrame).css('left', left);\n\t\t}\n\t};\n\n\tPresentation.prototype.createMobileServerBridge = function() {\n\t\t//to implement in extending classes\n\t};\n\n\treturn Presentation;\n\n})();","module.exports = (function(){\n\tvar ContentBase = require('../ContentBase');\n\tvar Constants = require('Constants');\n\n\tfunction ChildAppEditor(name, type) {\n\t\tContentBase.call(this, name);\n\t\tthis.type = type;\n\n\t\tthis.slideControlEnabled = false;\n\t\tconsole.log(\"[ChildAppEditor] init\");\n\n\t\tthis.codeMirror = CodeMirror.fromTextArea(document.getElementById('code'), {\n\t\t\tlineNumbers: true,\n\t\t\tmode: \"javascript\",\n\t\t\textraKeys: {\"Ctrl-Space\": \"autocomplete\"}\n\t    });\n\n\t    $('.btn-save').on('click', $.proxy(this.saveClickHandler, this));\n\t    $('.btn-run').on('click', $.proxy(this.runClickHandler, this));\n\t}\n\n\tChildAppEditor.prototype = Object.create(ContentBase.prototype);\n\n\tChildAppEditor.prototype.saveClickHandler = function() {\n\t\tvar code = this.codeMirror.getValue();\n\t\tthis.postMessage({\n\t\t\taction: Constants.CHILD_APP_SAVE_CODE,\n\t\t\tcode: code,\n\t\t\ttype: this.type\n\t\t});\n\t\tthis.postMessage({\n\t\t\taction: Constants.OPEN_COMMAND_LINE\n\t\t});\n\t};\n\n\tChildAppEditor.prototype.runClickHandler = function() {\n\t\tvar code = this.codeMirror.getValue();\n\t\tthis.postMessage({\n\t\t\taction: Constants.CHILD_APP_RUN_CODE,\n\t\t\tcode: code,\n\t\t\ttype: this.type\n\t\t});\n\t\tthis.postMessage({\n\t\t\taction: Constants.OPEN_CAMERA\n\t\t});\n\t};\n\n\treturn ChildAppEditor;\n\n})();","module.exports = (function(){\n\n\tvar dgram = requireNode('dgram');\n\n\tvar ContentBase = require('../ContentBase');\n\tvar Constants = require('Constants');\n\tvar GameCharacter = require('./GameCharacter');\n\tvar HeartRateCanvas = require('../../HeartRateCanvas');\n\n\tfunction HighestHeartrateGame() {\n\t\tContentBase.call(this, 'highest-heartrate-game');\n\t\tthis.winner = false;\n\t\tthis.flagDropped = false;\n\t\tthis.sparkIdMap = {};\n\t\tthis.minHeartRate = 60;\n\t\tthis.maxHeartRate = 200;\n\n\t\tthis._udpErrorHandler = this.udpErrorHandler.bind(this);\n\t\tthis._udpMessageHandler = this.udpMessageHandler.bind(this);\n\t\tthis._udpListeningHandler = this.udpListeningHandler.bind(this);\n\n\t\tthis.peachCanvas = new HeartRateCanvas(document.getElementById('peach'));\n\t\tthis.marioCanvas = new HeartRateCanvas(document.getElementById('mario'));\n\n\t\t//game canvas\n\t\tthis.canvas = document.getElementById('game');\n\t\tthis.stage = new createjs.Stage(this.canvas);\n\n\t\tthis.backgroundFill = new createjs.Shape();\n\t\tthis.stage.addChild(this.backgroundFill);\n\n\t\tvar manifest = [\n\t\t\t{ src: \"images/mario/mario-spritesheet.png\", id: \"characters\" },\n\t\t\t{ src: \"images/mario/ground.png\", id: \"ground\" },\n\t\t\t{ src: \"images/mario/hills.png\", id: \"hills\" },\n\t\t\t{ src: \"images/mario/flagpole.png\", id: \"flagpole\" },\n\t\t\t{ src: \"images/mario/flag-spritesheet.png\", id: \"flag\" }\n\t\t];\n\t\tthis.loader = new createjs.LoadQueue(false);\n\t\tthis.loader.addEventListener(\"complete\", $.proxy(this.loadCompleteHandler, this));\n\t\tthis.loader.loadManifest(manifest);\n\n\t\tcreatejs.Ticker.setFPS(60);\n\t\tcreatejs.Ticker.addEventListener(\"tick\", this.stage);\n\n\t\t$('.substate-intro .btn').on('click', this.startClickHandler.bind(this));\n\n\t\tthis.showCurrentState();\n\t}\n\n\tHighestHeartrateGame.prototype = Object.create(ContentBase.prototype);\n\n\tHighestHeartrateGame.prototype.onStateChanged = function() {\n\t\tif(this.state === Constants.STATE_ACTIVE) {\n\t\t\tthis.udpSocket = dgram.createSocket('udp4');\n\t\t\tthis.udpSocket.on(\"error\", this._udpErrorHandler);\n\t\t\tthis.udpSocket.on(\"message\", this._udpMessageHandler);\n\t\t\tthis.udpSocket.on(\"listening\", this._udpListeningHandler);\n\t\t\tthis.udpSocket.bind(1234);\n\t\t} else {\n\t\t\tif(this.udpSocket) {\n\t\t\t\t//close the udp socket\n\t\t\t\tthis.udpSocket.removeListener(\"error\", this._udpErrorHandler);\n\t\t\t\tthis.udpSocket.removeListener(\"message\", this._udpMessageHandler);\n\t\t\t\tthis.udpSocket.removeListener(\"listening\", this._udpListeningHandler);\n\t\t\t\tthis.udpSocket.close();\n\t\t\t\tthis.udpSocket = null;\n\t\t\t}\n\t\t}\n\t};\n\n\tHighestHeartrateGame.prototype.udpErrorHandler = function(error) {\n\t\tconsole.log('[HighestHeartrateGame] udpErrorHandler', error);\n\t\tthis.udpSocket.close();\n\t};\n\n\tHighestHeartrateGame.prototype.udpMessageHandler = function(message, remoteInfo) {\n\t\tvar str = message.toString();\n\t\tvar split = str.split(';');\n\t\tif(split.length > 2) {\n\t\t\tthis.setHeartRate(split[0], split[2]);\n\t\t}\n\t};\n\n\tHighestHeartrateGame.prototype.udpListeningHandler = function() {\n\t\tconsole.log('[HighestHeartrateGame] udpListening');\n\t};\n\n\tHighestHeartrateGame.prototype.setHeartRate = function(id, heartRate) {\n\t\theartRate = parseInt(heartRate);\n\t\tif(this.peach) {\n\t\t\t//assets are ready\n\t\t\tif(!this.sparkIdMap[id]) {\n\t\t\t\tif(!this.peach.sparkId) {\n\t\t\t\t\tthis.sparkIdMap[id] = {\n\t\t\t\t\t\tcharacter: this.peach,\n\t\t\t\t\t\theartRateCanvas: this.peachCanvas,\n\t\t\t\t\t\t$col: $('.col-peach')\n\t\t\t\t\t};\n\t\t\t\t\tthis.peach.sparkId = id;\n\t\t\t\t} else if(!this.mario.sparkId) {\n\t\t\t\t\tthis.sparkIdMap[id] = {\n\t\t\t\t\t\tcharacter: this.mario,\n\t\t\t\t\t\theartRateCanvas: this.marioCanvas,\n\t\t\t\t\t\t$col: $('.col-mario')\n\t\t\t\t\t};\n\t\t\t\t\tthis.mario.sparkId = id;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.sparkIdMap[id]) {\n\t\t\t\t//update canvas\n\t\t\t\tthis.sparkIdMap[id].heartRateCanvas.updateHeartRate(heartRate);\n\t\t\t\t//update text\n\t\t\t\tthis.sparkIdMap[id].$col.find('.heartRate').text(heartRate);\n\t\t\t\t//update character speed\n\t\t\t\tif(this.substate === Constants.HIGHEST_HEARTRATE_GAME_GAME && !this.winner) {\n\t\t\t\t\tvar targetSpeed = Math.min(1, Math.max(0, this.map(heartRate, this.minHeartRate, this.maxHeartRate, 0, 1)));\n\t\t\t\t\tthis.sparkIdMap[id].character.setSpeedX(targetSpeed);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tHighestHeartrateGame.prototype.loadCompleteHandler = function() {\n\t\tthis.hillsImage = this.loader.getResult(\"hills\");\n\t\tthis.hills = new createjs.Shape();\n\t\tthis.hills.tileW = this.hillsImage.width;\n\n\t\tthis.groundImage = this.loader.getResult(\"ground\");\n\t\tthis.ground = new createjs.Shape();\n\t\tthis.ground.tileW = this.groundImage.width;\n\n\t\tthis.flagpole = new createjs.Bitmap(this.loader.getResult(\"flagpole\"));\n\n\t\tthis.flag = new createjs.Sprite(new createjs.SpriteSheet(\n\t\t\t{\n\t\t\t\timages: [this.loader.getResult(\"flag\")], \n\t\t\t\tframes:[\n\t\t\t\t\t[0, 0, 32, 32, 0, 0, 0],\n\t\t\t\t\t[32, 0, 32, 32, 0, 0, 0],\n\t\t\t\t\t[0, 32, 32, 32, 0, 0, 0],\n\t\t\t\t],\n\t\t\t\tanimations: {\n\t\t\t\t\tmoving:{ frames:[0, 1, 2, ], frequency:4, next:true},\n\t\t\t\t}\n\t\t\t}\n\t\t), \"moving\");\n\t\tthis.flag.framerate = 8;\n\n\t\tthis.peach = new GameCharacter(new createjs.SpriteSheet(\n\t\t{\n\t\t\timages: [this.loader.getResult(\"characters\")],\n\t\t\tframes:[\n\t\t\t\t[0, 0, 32, 64, 0, 0, 0],\n\t\t\t\t[32, 0, 32, 64, 0, 0, 0],\n\t\t\t\t[64, 0, 32, 64, 0, 0, 0],\n\t\t\t\t[96, 0, 32, 64, 0, 0, 0],\n\t\t\t\t[0, 64, 32, 64, 0, 0, 0],],\n\t\t\t\tanimations: {\n\t\t\t\trun:{ frames:[0, 1, 2, 3, ], frequency:4, next:true},\n\t\t\t\tjump:{ frames:[4, ], frequency:4, next:true},}\n\t\t}));\n\t\tthis.peach.name = \"peach\";\n\n\t\tthis.mario = new GameCharacter(new createjs.SpriteSheet(\n\t\t{\n\t\t\timages: [this.loader.getResult(\"characters\")],\n\t\t\tframes:[\n\t\t\t\t[32, 64, 32, 64, 0, 0, 0],\n\t\t\t\t[64, 64, 32, 64, 0, 0, 0],\n\t\t\t\t[96, 64, 32, 64, 0, 0, 0],\n\t\t\t\t[0, 128, 32, 64, 0, 0, 0],\n\t\t\t\t[32, 128, 32, 64, 0, 0, 0],],\n\t\t\t\tanimations: {\n\t\t\t\trun:{ frames:[0, 1, 2, 3, ], frequency:4, next:true},\n\t\t\t\tjump:{ frames:[4, ], frequency:4, next:true},}\n\t\t}));\n\t\tthis.mario.name = \"mario\";\n\n\t\tthis.resetGame();\n\n\t\tthis.stage.addChild(this.hills, this.ground, this.flagpole, this.flag, this.mario.sprite, this.peach.sprite);\n\t\tthis.resizeHandler();\n\n\t\t//fake control of characters\n\t\t$(window).on('keydown', this.keydownHandler.bind(this));\n\t};\n\n\tHighestHeartrateGame.prototype.setSubstate = function(substate) {\n\t\tif(this.substate !== substate) {\n\t\t\tthis.substate = substate;\n\t\t\tthis.showCurrentState();\n\t\t}\n\t};\n\n\tHighestHeartrateGame.prototype.showCurrentState = function() {\n\t\t$('.substate').removeClass('active');\n\t\tif(this.substate === Constants.HIGHEST_HEARTRATE_GAME_GAME) {\n\t\t\tthis.resetGame();\n\t\t\t$('.substate-game').addClass('active');\n\t\t} else if(this.substate === Constants.HIGHEST_HEARTRATE_GAME_FINISHED) {\n\t\t\t$('.substate-finished').addClass('active');\n\t\t} else {\n\t\t\t$('.substate-intro').addClass('active');\n\t\t}\n\t};\n\n\tHighestHeartrateGame.prototype.map = function(value, istart, istop, ostart, ostop) {\n\t\treturn ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n\t};\n\n\tHighestHeartrateGame.prototype.startClickHandler = function() {\n\t\tthis.setSubstate(Constants.HIGHEST_HEARTRATE_GAME_GAME);\n\t};\n\n\tHighestHeartrateGame.prototype.resetGame = function() {\n\t\tthis.winner = false;\n\t\tthis.flagDropped = false;\n\t\tif(this.peach) {\n\t\t\tthis.peach.setSpeedX(0);\n\t\t\tthis.mario.setSpeedX(0);\n\n\t\t\tthis.peach.sprite.x = 50;\n\t\t\tthis.mario.sprite.x = 10;\n\n\t\t\tthis.flag.y = this.flagpole.y + 16;\n\t\t\tthis.flag.gotoAndPlay(\"moving\");\n\t\t}\n\t};\n\n\tHighestHeartrateGame.prototype.drawLoop = function() {\n\t\tif(this.peach) {\n\t\t\tthis.peach.update();\n\t\t\tthis.mario.update();\n\t\t\tif(!this.winner) {\n\t\t\t\tif(this.peach.sprite.x >= this.peach.finalX) {\n\t\t\t\t\tthis.setWinner(this.peach);\n\t\t\t\t} else if(this.mario.sprite.x >= this.mario.finalX) {\n\t\t\t\t\tthis.setWinner(this.mario);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//stop the non-winner\n\t\t\t\tif(this.winner === this.mario) {\n\t\t\t\t\tthis.peach.setSpeedX(0);\n\t\t\t\t} else {\n\t\t\t\t\tthis.mario.setSpeedX(0);\n\t\t\t\t}\n\t\t\t\t//drop flag?\n\t\t\t\tif(!this.flagDropped && this.winner.sprite.x >= this.flagpole.x) {\n\t\t\t\t\tthis.flagDropped = true;\n\t\t\t\t\tthis.flag.gotoAndStop(\"moving\");\n\t\t\t\t\tthis.winner.setSpeedX(0);\n\t\t\t\t}\n\t\t\t\tif(this.flagDropped) {\n\t\t\t\t\t//follow the winner down\n\t\t\t\t\tthis.flag.y = this.winner.sprite.y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tHighestHeartrateGame.prototype.setWinner = function(winner) {\n\t\tthis.winner = winner;\n\t\tthis.winner.setSpeedX(1);\n\t\tthis.winner.jump(22);\n\t\tthis.winner.finalReached = true;\n\t\t$('.substate-finished .winner').text(this.winner.name + \" wins!\");\n\t\tthis.setSubstate(Constants.HIGHEST_HEARTRATE_GAME_FINISHED);\n\t};\n\n\tHighestHeartrateGame.prototype.keydownHandler = function(event) {\n\t\tif(!this.winner) {\n\t\t\tswitch(event.keyCode) {\n\t\t\t\tcase 65: //a\n\t\t\t\t\tthis.peach.setSpeedX(0.5);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 90: //z\n\t\t\t\t\tthis.mario.setSpeedX(0.5);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.peach.setSpeedX(0);\n\t\t\t\t\tthis.mario.setSpeedX(0);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tHighestHeartrateGame.prototype.resizeHandler = function() {\n\t\t//resize the canvas\n\t\tvar w = this.canvas.width = window.innerWidth;\n\t\tvar h = this.canvas.height = window.innerHeight;\n\n\t\tthis.backgroundFill.graphics.beginFill('#5088a0').drawRect(0, 0, w, h).endFill();\n\n\t\tif(this.loader.loaded) {\n\t\t\tthis.hills.graphics.clear();\n\t\t\tthis.hills.graphics.beginBitmapFill(this.hillsImage).drawRect(0, 0, w+this.hillsImage.width, this.hillsImage.height);\n\t\t\tthis.hills.y = h-this.hillsImage.height-this.groundImage.height;\n\n\t\t\tthis.ground.graphics.clear();\n\t\t\tthis.ground.graphics.beginBitmapFill(this.groundImage).drawRect(0, 0, w+this.groundImage.width, this.groundImage.height);\n\t\t\tthis.ground.y = h-this.groundImage.height;\n\n\t\t\tthis.flagpole.x = w - 100;\n\t\t\tthis.flagpole.y = this.ground.y - this.flagpole.getBounds().height;\n\n\t\t\tthis.peach.minX = this.mario.minX = 0;\n\t\t\tthis.peach.maxX = this.mario.maxX = w - 50;\n\n\t\t\tthis.peach.maxY = this.ground.y - this.peach.sprite.getBounds().height;\n\t\t\tthis.mario.maxY = this.ground.y - this.mario.sprite.getBounds().height;\n\n\t\t\tthis.peach.finalX = this.mario.finalX = this.flagpole.x - 100;\n\n\t\t\tthis.flag.x = this.flagpole.x + 16;\n\t\t\tif(this.winner && this.flagDropped) {\n\t\t\t\tthis.flag.y = this.winner.y;\n\t\t\t} else {\n\t\t\t\tthis.flag.y = this.flagpole.y + 16;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn HighestHeartrateGame;\n\n})();","module.exports = (function(){\n\n\tvar Constants = require('Constants');\n\tvar ContentBase = require('../ContentBase');\n\tvar HeartRateCanvas = require('../../HeartRateCanvas');\n\n\tfunction IntroPoster() {\n\t\tContentBase.call(this, 'intro-poster');\n\t\tconsole.log(\"[IntroPoster] init\");\n\n\t\tthis.heartRateCanvas = new HeartRateCanvas(document.getElementById('polarHeartRateCanvas'));\n\t\tthis.heartRateCanvas.showHeartRateTextInBackground = true;\n\t\tthis.heartRateCanvas.updateHeartRate(60);//default 60 bpm\n\t\tthis.resizeHeartRateCanvas();\n\n\t\t$(window).on('resize', $.proxy(this.resizeHandler, this));\n\t}\n\n\tIntroPoster.prototype = Object.create(ContentBase.prototype);\n\n\tIntroPoster.prototype.handleMessage = function(data) {\n\t\tif(data.action === Constants.HEART_RATE_POLAR) {\n\t\t\tthis.updateHeartRate(data.heartRate);\n\t\t}\n\t};\n\n\tIntroPoster.prototype.updateHeartRate = function(heartRate) {\n\t\tthis.heartRateCanvas.updateHeartRate(heartRate);\n\t\t$('.background.heartrate').text(heartRate);\n\t};\n\n\tIntroPoster.prototype.resizeHandler = function() {\n\t\tthis.resizeHeartRateCanvas();\n\t};\n\n\tIntroPoster.prototype.resizeHeartRateCanvas = function() {\n\t\tthis.heartRateCanvas.resize(window.innerWidth, window.innerHeight / 2);\n\t};\n\n\treturn IntroPoster;\n\n})();","module.exports = (function(){\n\n\tvar dgram = requireNode('dgram');\n\n\tvar ContentBase = require('../ContentBase');\n\tvar Constants = require('Constants');\n\tvar GameCharacter = require('./GameCharacter');\n\tvar HeartRateCanvas = require('../../HeartRateCanvas');\n\n\tfunction LowestHeartrateGame() {\n\t\tContentBase.call(this, 'lowest-heartrate-game');\n\n\t\tthis.sparkIdMap = {};\n\t\tthis.beamPosition = 0.5;\n\t\tthis.maxHeartRate = 100;\n\t\tthis.winner = false;\n\n\t\tthis._udpErrorHandler = this.udpErrorHandler.bind(this);\n\t\tthis._udpMessageHandler = this.udpMessageHandler.bind(this);\n\t\tthis._udpListeningHandler = this.udpListeningHandler.bind(this);\n\n\t\tconsole.log(\"[LowestHeartrateGame] init\");\n\n\t\t$('.substate-intro .btn').on('click', this.startClickHandler.bind(this));\n\n\t\t//heart rate canvas\n\t\tthis.gokuCanvas = new HeartRateCanvas(document.getElementById('goku'));\n\t\tthis.gohanCanvas = new HeartRateCanvas(document.getElementById('gohan'));\n\n\t\t//game canvas\n\t\tthis.canvas = document.getElementById('game');\n\t\tthis.stage = new createjs.Stage(this.canvas);\n\n\t\tthis.backgroundFill = new createjs.Shape();\n\t\tthis.stage.addChild(this.backgroundFill);\n\n\t\tvar manifest = [\n\t\t\t{ src: \"images/dragonball/dragonball-spritesheet.png\", id: \"characters\" },\n\t\t\t{ src: \"images/dragonball/beam.png\", id: \"beam\" },\n\t\t\t{ src: \"images/dragonball/background.png\", id: \"background\" },\n\t\t\t{ src: \"images/dragonball/floor.png\", id: \"floor\" }\n\t\t];\n\t\tthis.loader = new createjs.LoadQueue(false);\n\t\tthis.loader.addEventListener(\"complete\", this.loadCompleteHandler.bind(this));\n\t\tthis.loader.loadManifest(manifest);\n\n\t\tcreatejs.Ticker.setFPS(60);\n\t\tcreatejs.Ticker.addEventListener(\"tick\", this.stage);\n\n\t\tthis.showCurrentState();\n\t\t$(window).on('resize', this.resizeHandler.bind(this));\n\t\tthis.resizeHandler();\n\t}\n\n\tLowestHeartrateGame.prototype = Object.create(ContentBase.prototype);\n\n\tLowestHeartrateGame.prototype.onStateChanged = function() {\n\t\tif(this.state === Constants.STATE_ACTIVE) {\n\t\t\tthis.udpSocket = dgram.createSocket('udp4');\n\t\t\tthis.udpSocket.on(\"error\", this._udpErrorHandler);\n\t\t\tthis.udpSocket.on(\"message\", this._udpMessageHandler);\n\t\t\tthis.udpSocket.on(\"listening\", this._udpListeningHandler);\n\t\t\tthis.udpSocket.bind(1234);\n\t\t} else {\n\t\t\tif(this.udpSocket) {\n\t\t\t\t//close the udp socket\n\t\t\t\tthis.udpSocket.removeListener(\"error\", this._udpErrorHandler);\n\t\t\t\tthis.udpSocket.removeListener(\"message\", this._udpMessageHandler);\n\t\t\t\tthis.udpSocket.removeListener(\"listening\", this._udpListeningHandler);\n\t\t\t\tthis.udpSocket.close();\n\t\t\t\tthis.udpSocket = null;\n\t\t\t}\n\t\t}\n\t};\n\n\tLowestHeartrateGame.prototype.udpErrorHandler = function(error) {\n\t\tconsole.log('[LowestHeartrateGame] udpErrorHandler', error);\n\t\tthis.udpSocket.close();\n\t};\n\n\tLowestHeartrateGame.prototype.udpMessageHandler = function(message, remoteInfo) {\n\t\tvar str = message.toString();\n\t\tvar split = str.split(';');\n\t\tif(split.length > 2) {\n\t\t\tthis.setHeartRate(split[0], split[2]);\n\t\t}\n\t};\n\n\tLowestHeartrateGame.prototype.udpListeningHandler = function() {\n\t\tconsole.log('[LowestHeartrateGame] udpListening');\n\t};\n\n\tLowestHeartrateGame.prototype.loadCompleteHandler = function() {\n\t\tthis.backgroundImage = new createjs.Bitmap(this.loader.getResult(\"background\"));\n\t\tthis.floorImage = new createjs.Bitmap(this.loader.getResult(\"floor\"));\n\n\t\tthis.goku = new GameCharacter(new createjs.SpriteSheet(\n\t\t{\n\t\t\timages: [this.loader.getResult(\"characters\")],\n\t\t\tframes:[\n\t\t\t\t[364, 364, 182, 182, 0, 0, 0],\n\t\t\t\t[546, 364, 182, 182, 0, 0, 0],\n\t\t\t\t[728, 364, 182, 182, 0, 0, 0],\n\t\t\t\t[0, 546, 182, 182, 0, 0, 0],\n\t\t\t\t[182, 546, 182, 182, 0, 0, 0],\n\t\t\t\t[364, 546, 182, 182, 0, 0, 0],\n\t\t\t\t[546, 546, 182, 182, 0, 0, 0],\n\t\t\t\t[728, 546, 182, 182, 0, 0, 0],\n\t\t\t\t[0, 728, 182, 182, 0, 0, 0],\n\t\t\t\t[182, 728, 182, 182, 0, 0, 0],],\n\t\t\t\tanimations: {\n\t\t\t\tfalling:{ frames:[0, 1, 2, 3, 4, 5, 6, ], frequency:4, next:false},\n\t\t\t\tkameha:{ frames:[7, ], frequency:4, next:true},\n\t\t\t\tstanding:{ frames:[8, 9, ], frequency:4, next:true},}\n\t\t}));\n\t\tthis.goku.name = \"goku\";\n\n\t\tthis.gohan = new GameCharacter(new createjs.SpriteSheet(\n\t\t{\n\t\t\timages: [this.loader.getResult(\"characters\")],\n\t\t\tframes:[\n\t\t\t\t[364, 0, 182, 182, 0, 0, 0],\n\t\t\t\t[546, 0, 182, 182, 0, 0, 0],\n\t\t\t\t[728, 0, 182, 182, 0, 0, 0],\n\t\t\t\t[0, 182, 182, 182, 0, 0, 0],\n\t\t\t\t[182, 182, 182, 182, 0, 0, 0],\n\t\t\t\t[364, 182, 182, 182, 0, 0, 0],\n\t\t\t\t[546, 182, 182, 182, 0, 0, 0],\n\t\t\t\t[728, 182, 182, 182, 0, 0, 0],\n\t\t\t\t[0, 364, 182, 182, 0, 0, 0],\n\t\t\t\t[182, 364, 182, 182, 0, 0, 0],],\n\t\t\t\tanimations: {\n\t\t\t\tfalling:{ frames:[0, 1, 2, 3, 4, 5, 6, ], frequency:4, next:false},\n\t\t\t\tkameha:{ frames:[7, ], frequency:4, next:true},\n\t\t\t\tstanding:{ frames:[8, 9, ], frequency:4, next:true},}\n\t\t}));\n\t\tthis.gohan.sprite.scaleX = -1;\n\t\tthis.gohan.name = \"gohan\";\n\n\t\tthis.beamImage = this.loader.getResult(\"beam\");\n\n\t\tthis.gokuBeam = new createjs.Shape();\n\t\tthis.gokuBeam.regY = this.beamImage.height / 2;\n\t\tthis.gokuBeam.tileW = this.beamImage.width;\n\n\t\tthis.gohanBeam = new createjs.Shape();\n\t\tthis.gohanBeam.regY = this.beamImage.height / 2;\n\t\tthis.gohanBeam.tileW = this.beamImage.width;\n\n\t\tthis.gokuBeamEnd = new createjs.Sprite(new createjs.SpriteSheet({\n\t\t\timages: [this.loader.getResult(\"characters\")],\n\t\t\tframes:[\n\t\t\t\t[0, 0, 182, 182, 0, 0, 0],\n\t\t\t\t[182, 0, 182, 182, 0, 0, 0],],\n\t\t\t\tanimations: {\n\t\t\t\tbeaming:{ frames:[0, 1, ], frequency:4, next:true},}\n\t\t}), \"beaming\");\n\t\tthis.gokuBeamEnd.regX = this.gokuBeamEnd.getBounds().width / 2 - 20;\n\t\tthis.gokuBeamEnd.regY = this.gokuBeamEnd.getBounds().height / 2;\n\t\tthis.gokuBeamEnd.scaleX = -1;\n\t\tthis.gokuBeamEnd.framerate = 10;\n\n\t\tthis.gohanBeamEnd = new createjs.Sprite(new createjs.SpriteSheet({\n\t\t\timages: [this.loader.getResult(\"characters\")],\n\t\t\tframes:[\n\t\t\t\t[0, 0, 182, 182, 0, 0, 0],\n\t\t\t\t[182, 0, 182, 182, 0, 0, 0],],\n\t\t\t\tanimations: {\n\t\t\t\tbeaming:{ frames:[0, 1, ], frequency:4, next:true},}\n\t\t}), \"beaming\");\n\t\tthis.gohanBeamEnd.regX = this.gohanBeamEnd.getBounds().width / 2 - 20;\n\t\tthis.gohanBeamEnd.regY = this.gohanBeamEnd.getBounds().height / 2;\n\t\tthis.gohanBeamEnd.framerate = 10;\n\n\t\tthis.resizeHandler();\n\t\tthis.resetGame();\n\n\t\tthis.stage.addChild(this.backgroundImage, this.floorImage, this.gohan.sprite, this.goku.sprite, this.gokuBeam, this.gohanBeam, this.gokuBeamEnd, this.gohanBeamEnd);\n\t};\n\n\tLowestHeartrateGame.prototype.setSubstate = function(substate) {\n\t\tif(this.substate !== substate) {\n\t\t\tthis.substate = substate;\n\t\t\tthis.showCurrentState();\n\t\t}\n\t};\n\n\tLowestHeartrateGame.prototype.setHeartRate = function(id, heartRate) {\n\t\theartRate = parseInt(heartRate);\n\t\tif(this.goku) {\n\t\t\t//assets are ready\n\t\t\tif(!this.sparkIdMap[id]) {\n\t\t\t\tif(!this.goku.sparkId) {\n\t\t\t\t\tthis.sparkIdMap[id] = {\n\t\t\t\t\t\tcharacter: this.goku,\n\t\t\t\t\t\theartRateCanvas: this.gokuCanvas,\n\t\t\t\t\t\t$col: $('.col-goku')\n\t\t\t\t\t};\n\t\t\t\t\tthis.goku.sparkId = id;\n\t\t\t\t} else if(!this.gohan.sparkId) {\n\t\t\t\t\tthis.sparkIdMap[id] = {\n\t\t\t\t\t\tcharacter: this.gohan,\n\t\t\t\t\t\theartRateCanvas: this.gohanCanvas,\n\t\t\t\t\t\t$col: $('.col-gohan')\n\t\t\t\t\t};\n\t\t\t\t\tthis.gohan.sparkId = id;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.sparkIdMap[id]) {\n\t\t\t\t//update canvas\n\t\t\t\tthis.sparkIdMap[id].heartRateCanvas.updateHeartRate(heartRate);\n\t\t\t\t//update text\n\t\t\t\tthis.sparkIdMap[id].$col.find('.heartRate').text(heartRate);\n\t\t\t\t//update heart rate\n\t\t\t\tthis.sparkIdMap[id].character.heartRate = heartRate;\n\t\t\t}\n\t\t}\n\t};\n\n\tLowestHeartrateGame.prototype.map = function(value, istart, istop, ostart, ostop) {\n\t\treturn ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n\t};\n\n\tLowestHeartrateGame.prototype.startClickHandler = function() {\n\t\tthis.setSubstate(Constants.LOWEST_HEARTRATE_GAME_GAME);\n\t};\n\n\tLowestHeartrateGame.prototype.showCurrentState = function() {\n\t\t$('.substate').removeClass('active');\n\t\tif(this.substate === Constants.LOWEST_HEARTRATE_GAME_GAME) {\n\t\t\tthis.resetGame();\n\t\t\t$('.substate-game').addClass('active');\n\t\t} else if(this.substate === Constants.LOWEST_HEARTRATE_GAME_FINISHED) {\n\t\t\t$('.substate-finished').addClass('active');\n\t\t} else {\n\t\t\t$('.substate-intro').addClass('active');\n\t\t}\n\t};\n\n\tLowestHeartrateGame.prototype.resetGame = function() {\n\t\tthis.beamPosition = 0.5;\n\t\tthis.gokuAbsoluteBeamPosition = this.minBeamEndX;\n\t\tthis.gohanAbsoluteBeamPosition = this.maxBeamEndX;\n\t\tthis.winner = false;\n\t};\n\n\tLowestHeartrateGame.prototype.drawLoop = function() {\n\t\tif(this.goku) {\n\t\t\tthis.goku.update();\n\t\t\tthis.gohan.update();\n\n\t\t\t//update beamPosition according to heart rates\n\t\t\tif(this.goku.heartRate > 0 && this.gohan.heartRate > 0) {\n\t\t\t\tvar heartRateDiff = Math.min(this.maxHeartRate, this.gohan.heartRate) - Math.min(this.maxHeartRate, this.goku.heartRate);\n\t\t\t\tvar newBeamPosition = this.beamPosition + (heartRateDiff * 0.0002);\n\t\t\t\tthis.setBeamPosition(newBeamPosition);\n\t\t\t}\n\n\t\t\tvar targetBeamPosition = this.minBeamEndX + this.beamPosition * this.availableBeamWidth;\n\n\t\t\tthis.gokuAbsoluteBeamPosition += (targetBeamPosition - this.gokuAbsoluteBeamPosition) * 0.2;\n\t\t\tthis.gohanAbsoluteBeamPosition += (targetBeamPosition - this.gohanAbsoluteBeamPosition) * 0.2;\n\n\t\t\t//position the beam ends\n\t\t\tthis.gokuBeamEnd.x = this.gokuAbsoluteBeamPosition;\n\t\t\tthis.gohanBeamEnd.x = this.gohanAbsoluteBeamPosition;\n\n\t\t\t//redraw the beams\n\t\t\tthis.gokuBeam.x = this.minBeamEndX - 30;\n\t\t\tthis.gokuBeam.graphics.clear();\n\t\t\tthis.gokuBeam.graphics.beginBitmapFill(this.beamImage).drawRect(0, 0, this.gokuAbsoluteBeamPosition + 20 - this.minBeamEndX, this.beamImage.height);\n\n\t\t\tthis.gohanBeam.x = this.gohanAbsoluteBeamPosition + 10;\n\t\t\tthis.gohanBeam.graphics.clear();\n\t\t\tthis.gohanBeam.graphics.beginBitmapFill(this.beamImage).drawRect(0, 0, this.maxBeamEndX - this.gohanAbsoluteBeamPosition + 16, this.beamImage.height);\n\n\t\t\tthis.gokuBeam.visible = this.gohanBeam.visible = this.gokuBeamEnd.visible = this.gohanBeamEnd.visible = (this.substate === Constants.LOWEST_HEARTRATE_GAME_GAME);\n\n\t\t\tif(!this.winner) {\n\t\t\t\tif(this.substate === Constants.LOWEST_HEARTRATE_GAME_GAME) {\n\t\t\t\t\tthis.goku.setState('kameha');\n\t\t\t\t\tthis.gohan.setState('kameha');\n\t\t\t\t\tif(this.beamPosition < 0.05) {\n\t\t\t\t\t\tthis.setWinner(this.gohan);\n\t\t\t\t\t} else if(this.beamPosition > 0.95) {\n\t\t\t\t\t\tthis.setWinner(this.goku);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.goku.setState('standing');\n\t\t\t\t\tthis.gohan.setState('standing');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(this.substate !== Constants.LOWEST_HEARTRATE_GAME_GAME) {\n\t\t\t\t\tthis.winner.setState('standing');\n\t\t\t\t}\n\t\t\t\tif(this.winner === this.goku) {\n\t\t\t\t\tthis.gohan.setState('falling');\n\t\t\t\t} else {\n\t\t\t\t\tthis.goku.setState('falling');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tLowestHeartrateGame.prototype.setWinner = function(winner) {\n\t\tthis.winner = winner;\n\t\tif(this.winner === this.gohan) {\n\t\t\tthis.beamPosition = -1;\n\t\t} else {\n\t\t\tthis.beamPosition = 2;\n\t\t}\n\t\t$('.substate-finished .winner').text(this.winner.name + \" wins!\");\n\t\t//timeout to change state\n\t\tsetTimeout($.proxy(this.setSubstate, this, Constants.LOWEST_HEARTRATE_GAME_FINISHED), 500);\n\t};\n\n\tLowestHeartrateGame.prototype.resizeHandler = function() {\n\t\t//resize the canvas\n\t\tvar w = this.canvas.width = window.innerWidth;\n\t\tvar h = this.canvas.height = window.innerHeight;\n\n\t\tthis.minBeamEndX = 270;\n\t\tthis.maxBeamEndX = w - 270;\n\t\tthis.availableBeamWidth = this.maxBeamEndX - this.minBeamEndX;\n\n\t\tthis.backgroundFill.graphics.beginFill('#d87040').drawRect(0, 0, w, h).endFill();\n\n\t\tif(this.goku) {\n\t\t\tthis.backgroundImage.x = Math.round(w - this.backgroundImage.getBounds().width) / 2;\n\t\t\tthis.backgroundImage.y = h - this.backgroundImage.getBounds().height - 100;\n\n\t\t\tthis.floorImage.x = Math.round(w - this.floorImage.getBounds().width) / 2;\n\t\t\tthis.floorImage.y = this.backgroundImage.y + this.backgroundImage.getBounds().height;\n\n\t\t\tthis.goku.sprite.x = 100;\n\t\t\tthis.goku.sprite.y = h - this.goku.sprite.getBounds().height;\n\n\t\t\tthis.gohan.sprite.x = w - 100;\n\t\t\tthis.gohan.sprite.y = h - this.gohan.sprite.getBounds().height;\n\n\t\t\t//beams\n\t\t\tthis.gokuBeamEnd.y = this.gohanBeamEnd.y = h - 120;\n\t\t\tthis.gokuBeam.y = this.gohanBeam.y = this.gokuBeamEnd.y;\n\t\t}\n\t};\n\n\tLowestHeartrateGame.prototype.setBeamPosition = function(value) {\n\t\tvalue = Math.max(0, Math.min(1, value));\n\t\tif(value !== this.beamPosition) {\n\t\t\tthis.beamPosition = value;\n\t\t}\n\t};\n\n\treturn LowestHeartrateGame;\n\n})();","module.exports = (function(){\n\n\tvar Constants = require('Constants');\n\tvar ContentBase = require('../ContentBase');\n\n\tfunction ReactPhones() {\n\t\tContentBase.call(this, 'react-phones');\n\n\t\tthis.gameDuration = 11;\n\t\tthis.clientsMap = {};\n\t\tthis.music = $('#music')[0];\n\n\t\t$('#ip').text('jsworkout.herokuapp.com');\n\n\t\t$('.substate-intro .btn').on('click', this.startClickHandler.bind(this));\n\t\t$('.substate-finished .btn').on('click', this.winnerClickHandler.bind(this));\n\n\t\tthis.setSubstate(Constants.REACT_PHONES_INTRO);\n\t}\n\n\tReactPhones.prototype = Object.create(ContentBase.prototype);\n\n\tReactPhones.prototype.setSubstate = function(substate) {\n\t\tif(this.substate !== substate) {\n\t\t\tthis.substate = substate;\n\t\t\t//send substate to mobile clients\n\t\t\tthis.postSocketMessage({\n\t\t\t\ttarget: {\n\t\t\t\t\tclient: 'mobile',\n\t\t\t\t\tslide: 'react-phones'\n\t\t\t\t},\n\t\t\t\tcontent: {\n\t\t\t\t\taction: Constants.SET_SUBSTATE,\n\t\t\t\t\tsubstate: this.substate\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(this.substate === Constants.REACT_PHONES_GAME) {\n\t\t\t\tthis.resetAllReactionSpeeds();\n\t\t\t}\n\t\t\tthis.showCurrentState();\n\t\t}\n\t};\n\n\tReactPhones.prototype.receiveSocketMessage = function(message) {\n\t\tif(!message.content) {\n\t\t\treturn;\n\t\t}\n\t\tif(message.content.action === 'updateRoomList') {\n\t\t\t//message.content.ids is an array with ids in this room\n\t\t\tvar clientMapIds = _.keys(this.clientsMap);\n\t\t\t//which ids are new? (in message.content.ids but not in clientsMap)\n\t\t\tvar newClientIds = _.difference(message.content.ids, clientMapIds);\n\t\t\t//which ids need to be removed? (in clientsMap but not in message.content.ids)\n\t\t\tvar removeClientIds = _.difference(clientMapIds, message.content.ids);\n\t\t\t//update our map\n\t\t\tnewClientIds.forEach(function(id){\n\t\t\t\tthis.clientsMap[id] = {\n\t\t\t\t\tid: id,\n\t\t\t\t\treactionSpeed: 99999999999\n\t\t\t\t};\n\t\t\t}, this);\n\t\t\tremoveClientIds.forEach(function(id){\n\t\t\t\tif(this.clientsMap[id]) {\n\t\t\t\t\t//this.clientsMap[id].$div.remove();\n\t\t\t\t}\n\t\t\t\tdelete this.clientsMap[id];\n\t\t\t}, this);\n\n\t\t\tthis.numClientsChanged();\n\t\t} else if(message.content.action === Constants.UPDATE_REACTION_SPEED) {\n\t\t\tif(!message.sender) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//message.sender.id contains the origin id\n\t\t\tif(!this.clientsMap[message.sender.id]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.clientsMap[message.sender.id].reactionSpeed = message.content.reactionSpeed;\n\t\t}\n\t};\n\n\tReactPhones.prototype.startClickHandler = function() {\n\t\tthis.setSubstate(Constants.REACT_PHONES_GAME);\n\t};\n\n\tReactPhones.prototype.winnerClickHandler = function() {\n\t\t//get the clienthandler with the largest motion, and blink it's screen\n\t\tvar winningClient = false;\n\t\tvar reactionSpeed = 99999999999;\n\t\tfor(var id in this.clientsMap) {\n\t\t\tif(!this.clientsMap[id].speedWinner && this.clientsMap[id].reactionSpeed < reactionSpeed) {\n\t\t\t\twinningClient = this.clientsMap[id];\n\t\t\t\treactionSpeed = winningClient.reactionSpeed;\n\t\t\t}\n\t\t}\n\t\tif(winningClient) {\n\t\t\twinningClient.speedWinner = true;\n\t\t\t//send message to this client\n\t\t\tthis.postSocketMessage({\n\t\t\t\ttarget: {\n\t\t\t\t\tclient: winningClient.id\n\t\t\t\t},\n\t\t\t\tcontent: {\n\t\t\t\t\taction: Constants.BLINK,\n\t\t\t\t\ttext: '<h1>Spectacular, You Win!</h1>',\n\t\t\t\t\tbackgroundColor: 'red'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tReactPhones.prototype.resetAllReactionSpeeds = function() {\n\t\tfor(var id in this.clientsMap) {\n\t\t\tthis.clientsMap[id].reactionSpeed = 99999999999;\n\t\t\tthis.clientsMap[id].speedWinner = false;\n\t\t}\n\t};\n\n\tReactPhones.prototype.numClientsChanged = function() {\n\t\t$('#connections span').text(_.keys(this.clientsMap).length);\n\t};\n\n\tReactPhones.prototype.showCurrentState = function() {\n\t\t$('.substate').removeClass('active');\n\t\t$('body').css({\n\t\t\tbackgroundImage: 'none'\n\t\t});\n\t\tif(this.substate === Constants.REACT_PHONES_GAME) {\n\t\t\tthis.music.play();\n\t\t\t$('.substate-game .countdown').html(this.gameDuration);\n\t\t\t$('.substate-game').addClass('active');\n\t\t\tthis.countDownTimeout = setTimeout(this.countDownHandler.bind(this, this.gameDuration - 1), 1000);\n\t\t} else if(this.substate === Constants.REACT_PHONES_FINISHED) {\n\t\t\t$('.substate-finished').addClass('active');\n\t\t} else {\n\t\t\t$('body').css({\n\t\t\t\tbackgroundRepeat: 'no-repeat',\n\t\t\t\tbackgroundSize: 'contain',\n\t\t\t\tbackgroundPosition: 'center center',\n\t\t\t\tbackgroundImage: 'url(images/iphone-connections.png)'\n\t\t\t});\n\t\t\t$('.substate-intro').addClass('active');\n\t\t}\n\t};\n\n\tReactPhones.prototype.countDownHandler = function(timeLeft) {\n\t\t$('.substate-game .countdown').html(timeLeft);\n\t\tif(timeLeft > 0) {\n\t\t\tthis.countDownTimeout = setTimeout(this.countDownHandler.bind(this, timeLeft - 1), 1000);\n\t\t} else {\n\t\t\tthis.setSubstate(Constants.REACT_PHONES_FINISHED);\n\t\t}\n\t};\n\n\treturn ReactPhones;\n\n})();","module.exports = (function(){\n\n\tvar ContentBase = require('../ContentBase');\n\tvar Constants = require('Constants');\n\n\tfunction ShakeYourPhones() {\n\t\tContentBase.call(this, 'shake-your-phones');\n\n\t\tthis.gameDuration = 10; //game lasts 10 seconds\n\t\tthis.clientsMap = {};\n\n\t\t$('#ip').text('jsworkout.herokuapp.com');\n\n\t\t$('.substate-intro .btn').on('click', this.startClickHandler.bind(this));\n\t\t$('.substate-finished .btn').on('click', this.winnerClickHandler.bind(this));\n\n\t\tthis.setSubstate(Constants.SHAKE_YOUR_PHONES_INTRO);\n\t}\n\n\tShakeYourPhones.prototype = Object.create(ContentBase.prototype);\n\n\tShakeYourPhones.prototype.setSubstate = function(substate) {\n\t\tif(this.substate !== substate) {\n\t\t\tthis.substate = substate;\n\t\t\t//send substate to mobile clients\n\t\t\tthis.postSocketMessage({\n\t\t\t\ttarget: {\n\t\t\t\t\tclient: 'mobile',\n\t\t\t\t\tslide: 'shake-your-phones'\n\t\t\t\t},\n\t\t\t\tcontent: {\n\t\t\t\t\taction: Constants.SET_SUBSTATE,\n\t\t\t\t\tsubstate: this.substate\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n\t\t\t\tthis.resetAllMaximumMotions();\n\t\t\t}\n\t\t\tthis.showCurrentState();\n\t\t}\n\t};\n\n\tShakeYourPhones.prototype.receiveSocketMessage = function(message) {\n\t\tif(!message.content) {\n\t\t\treturn;\n\t\t}\n\t\tif(message.content.action === 'updateRoomList') {\n\t\t\t//message.content.ids is an array with ids in this room\n\t\t\tvar clientMapIds = _.keys(this.clientsMap);\n\t\t\t//which ids are new? (in message.content.ids but not in clientsMap)\n\t\t\tvar newClientIds = _.difference(message.content.ids, clientMapIds);\n\t\t\t//which ids need to be removed? (in clientsMap but not in message.content.ids)\n\t\t\tvar removeClientIds = _.difference(clientMapIds, message.content.ids);\n\t\t\t//update our map\n\t\t\tnewClientIds.forEach(function(id){\n\t\t\t\tthis.clientsMap[id] = {\n\t\t\t\t\tid: id,\n\t\t\t\t\tmaximumMotion: 0,\n\t\t\t\t\tsize: 10,\n\t\t\t\t\t$div: $('<div class=\"circle\">').css({\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft: Math.random() * 100 + '%',\n\t\t\t\t\t\ttop: Math.random() * 100 + '%',\n\t\t\t\t\t\tbackgroundColor: 'rgba(' + Math.round(Math.random() * 255) + ',' + Math.round(Math.random() * 255) + ',' + Math.round(Math.random() * 255) + ', 0.5)',\n\t\t\t\t\t\twidth: '10px',\n\t\t\t\t\t\theight: '10px'\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t\t$('.background .substate-game').append(this.clientsMap[id].$div);\n\t\t\t}, this);\n\t\t\tremoveClientIds.forEach(function(id){\n\t\t\t\tif(this.clientsMap[id]) {\n\t\t\t\t\tthis.clientsMap[id].$div.remove();\n\t\t\t\t}\n\t\t\t\tdelete this.clientsMap[id];\n\t\t\t}, this);\n\n\t\t\tthis.numClientsChanged();\n\t\t} else if(message.content.action === Constants.UPDATE_MAXIMUM_MOTION) {\n\t\t\tif(!message.sender) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//message.sender.id contains the origin id\n\t\t\tif(!this.clientsMap[message.sender.id]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.clientsMap[message.sender.id].maximumMotion = message.content.maximumMotion;\n\t\t}\n\t};\n\n\tShakeYourPhones.prototype.startClickHandler = function() {\n\t\tthis.setSubstate(Constants.SHAKE_YOUR_PHONES_GAME);\n\t};\n\n\tShakeYourPhones.prototype.winnerClickHandler = function() {\n\t\t//get the clienthandler with the largest motion, and blink it's screen\n\t\tvar winningClient = false;\n\t\tvar maximumMotion = -1;\n\t\tfor(var id in this.clientsMap) {\n\t\t\tif(!this.clientsMap[id].shakeWinner && this.clientsMap[id].maximumMotion > maximumMotion) {\n\t\t\t\twinningClient = this.clientsMap[id];\n\t\t\t\tmaximumMotion = winningClient.maximumMotion;\n\t\t\t}\n\t\t}\n\t\tif(winningClient) {\n\t\t\twinningClient.shakeWinner = true;\n\t\t\t//send message to this client\n\t\t\tthis.postSocketMessage({\n\t\t\t\ttarget: {\n\t\t\t\t\tclient: winningClient.id\n\t\t\t\t},\n\t\t\t\tcontent: {\n\t\t\t\t\taction: Constants.BLINK,\n\t\t\t\t\ttext: '<h1>Spectacular, You Win!</h1>',\n\t\t\t\t\tbackgroundColor: 'red'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tShakeYourPhones.prototype.resetAllMaximumMotions = function() {\n\t\tfor(var id in this.clientsMap) {\n\t\t\tthis.clientsMap[id].maximumMotion = 0;\n\t\t\tthis.clientsMap[id].shakeWinner = false;\n\t\t}\n\t};\n\n\tShakeYourPhones.prototype.numClientsChanged = function() {\n\t\t$('#connections span').text(_.keys(this.clientsMap).length);\n\t};\n\n\tShakeYourPhones.prototype.showCurrentState = function() {\n\t\t$('.substate').removeClass('active');\n\t\t$('body').css({\n\t\t\tbackgroundImage: 'none'\n\t\t});\n\t\tif(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n\t\t\t$('.substate-game .countdown').html(this.gameDuration);\n\t\t\t$('.substate-game').addClass('active');\n\t\t\tthis.countDownTimeout = setTimeout(this.countDownHandler.bind(this, this.gameDuration - 1), 1000);\n\t\t} else if(this.substate === Constants.SHAKE_YOUR_PHONES_FINISHED) {\n\t\t\t$('.substate-finished').addClass('active');\n\t\t} else {\n\t\t\t$('body').css({\n\t\t\t\tbackgroundRepeat: 'no-repeat',\n\t\t\t\tbackgroundSize: 'contain',\n\t\t\t\tbackgroundPosition: 'center center',\n\t\t\t\tbackgroundImage: 'url(images/iphone-connections.png)'\n\t\t\t});\n\t\t\t$('.substate-intro').addClass('active');\n\t\t}\n\t};\n\n\tShakeYourPhones.prototype.countDownHandler = function(timeLeft) {\n\t\t$('.substate-game .countdown').html(timeLeft);\n\t\tif(timeLeft > 0) {\n\t\t\tthis.countDownTimeout = setTimeout(this.countDownHandler.bind(this, timeLeft - 1), 1000);\n\t\t} else {\n\t\t\tthis.setSubstate(Constants.SHAKE_YOUR_PHONES_FINISHED);\n\t\t}\n\t};\n\n\tShakeYourPhones.prototype.drawLoop = function() {\n\t\tif(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n\t\t\t$.each(this.clientsMap, function(key, value){\n\t\t\t\tvar target = 3 * Math.max(10, value.maximumMotion);\n\t\t\t\tvalue.size += (target - value.size) * 0.2;\n\t\t\t\tvalue.$div.css({\n\t\t\t\t\twidth: value.size + 'px',\n\t\t\t\t\theight: value.size + 'px'\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\n\treturn ShakeYourPhones;\n\n})();","module.exports = (function(){\n\n\tvar ContentBase = require('../ContentBase');\n\tvar Constants = require('Constants');\n\tvar DanceGameButton = require('./DanceGameButton');\n\tvar ScoreBar = require('./ScoreBar');\n\n\tfunction SpacebrewDanceGame() {\n\t\tContentBase.call(this, 'spacebrew-dance-game');\n\t\tthis.tweeningNotes = [];\n\t\tthis.notesByTime = {\"12\":[{\"name\":\"blue-up\"}],\"28\":[{\"name\":\"blue-up\"}],\"29\":[{\"name\":\"blue-up\"}],\"30\":[{\"name\":\"blue-up\"}],\"39\":[{\"name\":\"orange-down\"}],\"48\":[{\"name\":\"orange-up\"}],\"57\":[{\"name\":\"orange-down\"}],\"58\":[{\"name\":\"blue-down\"}],\"66\":[{\"name\":\"blue-down\"}],\"67\":[{\"name\":\"blue-left\"},{\"name\":\"orange-right\"}],\"74\":[{\"name\":\"blue-left\"},{\"name\":\"orange-up\"},{\"name\":\"blue-up\"},{\"name\":\"orange-right\"}],\"76\":[{\"name\":\"blue-left\"},{\"name\":\"orange-up\"},{\"name\":\"blue-up\"},{\"name\":\"orange-right\"}],\"77\":[{\"name\":\"orange-up\"},{\"name\":\"orange-right\"}],\"9.8\":[{\"name\":\"blue-up\"}],\"10.8\":[{\"name\":\"blue-down\"}],\"12.8\":[{\"name\":\"blue-down\"}],\"14.2\":[{\"name\":\"blue-up\"}],\"15.1\":[{\"name\":\"blue-down\"}],\"16.2\":[{\"name\":\"blue-left\"}],\"18.4\":[{\"name\":\"orange-up\"}],\"19.4\":[{\"name\":\"orange-down\"}],\"20.5\":[{\"name\":\"orange-up\"}],\"21.6\":[{\"name\":\"orange-down\"}],\"22.6\":[{\"name\":\"orange-up\"}],\"23.7\":[{\"name\":\"orange-down\"}],\"24.7\":[{\"name\":\"orange-right\"}],\"26.8\":[{\"name\":\"blue-up\"}],\"27.4\":[{\"name\":\"blue-down\"}],\"28.5\":[{\"name\":\"blue-down\"}],\"29.5\":[{\"name\":\"blue-down\"}],\"30.5\":[{\"name\":\"blue-down\"}],\"31.1\":[{\"name\":\"blue-up\"}],\"31.6\":[{\"name\":\"blue-down\"}],\"32.1\":[{\"name\":\"blue-up\"}],\"32.6\":[{\"name\":\"blue-down\"}],\"33.2\":[{\"name\":\"blue-left\"}],\"35.3\":[{\"name\":\"orange-up\"}],\"35.8\":[{\"name\":\"orange-down\"}],\"36.4\":[{\"name\":\"orange-up\"}],\"36.9\":[{\"name\":\"orange-down\"}],\"37.4\":[{\"name\":\"orange-up\"}],\"37.9\":[{\"name\":\"orange-down\"}],\"38.4\":[{\"name\":\"orange-up\"}],\"39.6\":[{\"name\":\"blue-up\"}],\"40.1\":[{\"name\":\"blue-down\"}],\"40.6\":[{\"name\":\"blue-up\"}],\"41.1\":[{\"name\":\"blue-down\"}],\"41.6\":[{\"name\":\"blue-up\"}],\"42.1\":[{\"name\":\"blue-down\"}],\"42.7\":[{\"name\":\"blue-up\"}],\"43.2\":[{\"name\":\"blue-down\"}],\"43.8\":[{\"name\":\"orange-up\"}],\"44.3\":[{\"name\":\"orange-down\"}],\"44.8\":[{\"name\":\"blue-up\"}],\"45.4\":[{\"name\":\"blue-down\"}],\"45.9\":[{\"name\":\"orange-up\"}],\"46.4\":[{\"name\":\"orange-down\"}],\"46.9\":[{\"name\":\"blue-up\"}],\"47.5\":[{\"name\":\"blue-down\"}],\"48.6\":[{\"name\":\"orange-down\"}],\"49.1\":[{\"name\":\"blue-up\"}],\"49.6\":[{\"name\":\"blue-down\"}],\"50.1\":[{\"name\":\"orange-right\"}],\"50.6\":[{\"name\":\"blue-left\"}],\"52.2\":[{\"name\":\"orange-right\"}],\"52.7\":[{\"name\":\"blue-left\"}],\"53.3\":[{\"name\":\"orange-right\"}],\"53.8\":[{\"name\":\"blue-left\"}],\"54.3\":[{\"name\":\"orange-right\"}],\"54.9\":[{\"name\":\"blue-left\"}],\"55.4\":[{\"name\":\"orange-right\"}],\"55.9\":[{\"name\":\"blue-left\"}],\"56.5\":[{\"name\":\"orange-up\"}],\"57.5\":[{\"name\":\"blue-up\"}],\"58.6\":[{\"name\":\"orange-up\"}],\"59.1\":[{\"name\":\"orange-down\"}],\"59.6\":[{\"name\":\"blue-up\"}],\"60.1\":[{\"name\":\"blue-down\"}],\"60.7\":[{\"name\":\"orange-right\"}],\"61.2\":[{\"name\":\"blue-left\"}],\"61.8\":[{\"name\":\"orange-up\"}],\"62.3\":[{\"name\":\"blue-up\"}],\"62.8\":[{\"name\":\"orange-down\"}],\"63.3\":[{\"name\":\"blue-down\"}],\"63.8\":[{\"name\":\"orange-right\"}],\"64.3\":[{\"name\":\"blue-left\"}],\"64.9\":[{\"name\":\"orange-up\"}],\"65.4\":[{\"name\":\"blue-up\"}],\"65.9\":[{\"name\":\"orange-down\"}],\"66.5\":[{\"name\":\"blue-down\"},{\"name\":\"orange-down\"}],\"67.5\":[{\"name\":\"blue-left\"},{\"name\":\"orange-right\"}],\"68.1\":[{\"name\":\"orange-up\"},{\"name\":\"blue-up\"}],\"68.5\":[{\"name\":\"blue-up\"}],\"68.6\":[{\"name\":\"orange-up\"}],\"69.2\":[{\"name\":\"blue-down\"}],\"69.3\":[{\"name\":\"orange-up\"},{\"name\":\"blue-up\"}],\"69.8\":[{\"name\":\"blue-down\"},{\"name\":\"blue-up\"}],\"70.3\":[{\"name\":\"orange-up\"},{\"name\":\"blue-up\"}],\"70.8\":[{\"name\":\"blue-down\"},{\"name\":\"blue-up\"}],\"71.4\":[{\"name\":\"blue-down\"}],\"71.9\":[{\"name\":\"blue-left\"},{\"name\":\"orange-up\"},{\"name\":\"blue-down\"}],\"72.4\":[{\"name\":\"blue-left\"},{\"name\":\"blue-down\"}],\"72.9\":[{\"name\":\"blue-left\"},{\"name\":\"orange-up\"},{\"name\":\"blue-up\"},{\"name\":\"orange-right\"}],\"73.5\":[{\"name\":\"blue-up\"}],\"74.5\":[{\"name\":\"blue-up\"}],\"74.9\":[{\"name\":\"blue-left\"},{\"name\":\"orange-up\"},{\"name\":\"blue-up\"},{\"name\":\"orange-right\"}],\"75.2\":[{\"name\":\"orange-up\"},{\"name\":\"blue-up\"},{\"name\":\"orange-right\"}],\"75.5\":[{\"name\":\"orange-up\"},{\"name\":\"blue-up\"},{\"name\":\"orange-right\"}],\"75.7\":[{\"name\":\"orange-up\"}],\"76.2\":[{\"name\":\"blue-left\"},{\"name\":\"orange-up\"},{\"name\":\"blue-up\"},{\"name\":\"orange-right\"}],\"76.5\":[{\"name\":\"blue-left\"},{\"name\":\"orange-up\"},{\"name\":\"blue-up\"},{\"name\":\"orange-right\"}],\"76.7\":[{\"name\":\"orange-up\"},{\"name\":\"orange-right\"}],\"77.3\":[{\"name\":\"blue-left\"},{\"name\":\"orange-up\"},{\"name\":\"blue-up\"},{\"name\":\"orange-right\"}],\"77.6\":[{\"name\":\"orange-up\"},{\"name\":\"orange-right\"}]};\n\t\tthis.noteNameMap = {};\n\t\tthis.pressedButtons = [];\n\t\tthis.speed = 3;\n\t\tthis.timeToReachTarget = 0;\n\t\tthis.tolerance = 0.15;\n\t\tthis.noteNames = [\n\t\t\t\"blue-up\",\n\t\t\t\"blue-down\",\n\t\t\t\"blue-left\",\n\t\t\t\"orange-up\",\n\t\t\t\"orange-down\",\n\t\t\t\"orange-right\"\n\t\t];\n\t\tthis.score = 0;\n\t\tthis.record = true;\n\t\tthis.recordedKeys = {};\n\t\tthis.audio = false;\n\t\tthis.roundedTime = 0;\n\n\t\tthis.parseNotesByTime();\n\n\t\tthis.audio = $('audio')[0];\n\n\t\t$('.substate-intro .btn').on('click', $.proxy(this.startClickHandler, this));\n\t\t$('.substate-game .btn').on('click', $.proxy(this.stopClickHandler, this));\n\n\t\t//spacebrew connection\n\t\tthis.sb = new Spacebrew.Client(\"localhost\", \"DDR Presentation\");\n\t\tthis.sb.onBooleanMessage = $.proxy(this.handleButton, this);\n\t\tfor (var i = this.noteNames.length - 1; i >= 0; i--) {\n\t\t\tthis.sb.addSubscribe(this.noteNames[i], \"boolean\");\n\t\t}\n\t\tthis.sb.connect();\n\n\t\t//game canvas\n\t\tthis.canvas = document.getElementById('game');\n\t\tthis.stage = new createjs.Stage(this.canvas);\n\n\t\tvar manifest = [\n\t\t\t{ src: \"images/dance/dancegame-buttons.png\", id: \"buttons\" }\n\t\t];\n\t\tthis.loader = new createjs.LoadQueue(false);\n\t\tthis.loader.addEventListener(\"complete\", $.proxy(this.loadCompleteHandler, this));\n\t\tthis.loader.loadManifest(manifest);\n\n\t\tcreatejs.Ticker.setFPS(60);\n\t\tcreatejs.Ticker.addEventListener(\"tick\", $.proxy(this.onTick, this));\n\n\t\tthis.showCurrentState();\n\t\t$(window).on('resize', $.proxy(this.resizeHandler, this));\n\t\tthis.resizeHandler();\n\n\t\t$(window).on('keyup', $.proxy(this.keyupHandler, this));\n\t}\n\n\tSpacebrewDanceGame.prototype = Object.create(ContentBase.prototype);\n\n\tSpacebrewDanceGame.prototype.parseNotesByTime = function() {\n\t\tvar notesByTime = {};\n\t\tfor(var key in this.notesByTime) {\n\t\t\tnotesByTime[parseFloat(key)] = this.notesByTime[key];\n\t\t}\n\t\tthis.notesByTime = notesByTime;\n\t\tconsole.log(this.notesByTime);\n\t};\n\n\tSpacebrewDanceGame.prototype.loadCompleteHandler = function() {\n\n\t\tthis.buttonsSheet = new createjs.SpriteSheet(\n{\nimages: [this.loader.getResult('buttons')], \nframes:[\n[0, 0, 120, 120, 0, 0, 0],\n[120, 0, 120, 120, 0, 0, 0],\n[240, 0, 120, 120, 0, 0, 0],\n[0, 120, 120, 120, 0, 0, 0],\n[120, 120, 120, 120, 0, 0, 0],\n[240, 120, 120, 120, 0, 0, 0],\n[0, 240, 120, 120, 0, 0, 0],\n[120, 240, 120, 120, 0, 0, 0],\n[240, 240, 120, 120, 0, 0, 0],],\nanimations: {\n'blue-wrong':{ frames:[0, ], frequency:4, next:true},\n'orange-wrong':{ frames:[1, ], frequency:4, next:true},\n'orange-correct':{ frames:[2, ], frequency:4, next:true},\n'blue-correct':{ frames:[3, ], frequency:4, next:true},\n'orange-outline':{ frames:[4, ], frequency:4, next:true},\n'blue-outline':{ frames:[5, ], frequency:4, next:true},\n'neutral-outline':{ frames:[6, ], frequency:4, next:true},\n'orange':{ frames:[7, ], frequency:4, next:true},\n'blue':{ frames:[8, ], frequency:4, next:true},}\n});\n\n\t\tthis.transparentBlueLeftButton = new DanceGameButton(this.buttonsSheet, 'neutral-outline', 'left');\n\t\tthis.transparentBlueUpButton = new DanceGameButton(this.buttonsSheet, 'neutral-outline', 'up');\n\t\tthis.transparentBlueDownButton = new DanceGameButton(this.buttonsSheet, 'neutral-outline', 'down');\n\t\t\n\t\tthis.transparentOrangeDownButton = new DanceGameButton(this.buttonsSheet, 'neutral-outline', 'down');\n\t\tthis.transparentOrangeUpButton = new DanceGameButton(this.buttonsSheet, 'neutral-outline', 'up');\n\t\tthis.transparentOrangeRightButton = new DanceGameButton(this.buttonsSheet, 'neutral-outline', 'right');\n\t\t\n\t\tthis.blueLeftContainer = new createjs.Container();\n\t\tthis.blueUpContainer = new createjs.Container();\n\t\tthis.blueDownContainer = new createjs.Container();\n\n\t\tthis.orangeDownContainer = new createjs.Container();\n\t\tthis.orangeUpContainer = new createjs.Container();\n\t\tthis.orangeRightContainer = new createjs.Container();\n\n\t\tthis.stage.addChild(this.blueLeftContainer, this.blueUpContainer, this.blueDownContainer, this.orangeDownContainer, this.orangeUpContainer, this.orangeRightContainer);\n\t\tthis.stage.addChild(this.transparentBlueLeftButton.sprite, this.transparentBlueUpButton.sprite, this.transparentBlueDownButton.sprite, this.transparentOrangeRightButton.sprite, this.transparentOrangeUpButton.sprite, this.transparentOrangeDownButton.sprite);\n\n\t\tthis.noteNameMap = {\n\t\t\t\"orange-down\": {\n\t\t\t\torientation: \"down\",\n\t\t\t\tcontainer: this.orangeDownContainer,\n\t\t\t\ttransparentButton: this.transparentOrangeDownButton,\n\t\t\t\tcolor: \"orange\"\n\t\t\t},\n\t\t\t\"orange-up\": {\n\t\t\t\torientation: \"up\",\n\t\t\t\tcontainer: this.orangeUpContainer,\n\t\t\t\ttransparentButton: this.transparentOrangeUpButton,\n\t\t\t\tcolor: \"orange\"\n\t\t\t},\n\t\t\t\"orange-right\": {\n\t\t\t\torientation: \"right\",\n\t\t\t\tcontainer: this.orangeRightContainer,\n\t\t\t\ttransparentButton: this.transparentOrangeRightButton,\n\t\t\t\tcolor: \"orange\"\n\t\t\t},\n\n\t\t\t\"blue-down\": {\n\t\t\t\torientation: \"down\",\n\t\t\t\tcontainer: this.blueDownContainer,\n\t\t\t\ttransparentButton: this.transparentBlueDownButton,\n\t\t\t\tcolor: \"blue\"\n\t\t\t},\n\t\t\t\"blue-up\": {\n\t\t\t\torientation: \"up\",\n\t\t\t\tcontainer: this.blueUpContainer,\n\t\t\t\ttransparentButton: this.transparentBlueUpButton,\n\t\t\t\tcolor: \"blue\"\n\t\t\t},\n\t\t\t\"blue-left\": {\n\t\t\t\torientation: \"left\",\n\t\t\t\tcontainer: this.blueLeftContainer,\n\t\t\t\ttransparentButton: this.transparentBlueLeftButton,\n\t\t\t\tcolor: \"blue\"\n\t\t\t}\n\t\t};\n\n\t\tthis.scoreBar = new ScoreBar();\n\t\tthis.stage.addChild(this.scoreBar.display);\n\n\t\tthis.resetGame();\n\t\tthis.resizeHandler();\n\t};\n\n\t//override setState, not to use drawLoop\n\tSpacebrewDanceGame.prototype.setState = function(state) {\n\t\tif(state !== this.state) {\n\t\t\tthis.state = state;\n\t\t\tthis.onStateChanged();\n\t\t}\n\t};\n\n\tSpacebrewDanceGame.prototype.setSubstate = function(substate) {\n\t\tif(this.substate !== substate) {\n\t\t\tthis.substate = substate;\n\t\t\tthis.showCurrentState();\n\t\t}\n\t};\n\n\tSpacebrewDanceGame.prototype.map = function(value, istart, istop, ostart, ostop) {\n\t\treturn ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n\t};\n\n\tSpacebrewDanceGame.prototype.round = function(value, numDecimals) {\n\t\tvar factor = Math.pow(10, numDecimals);\n\t\treturn Math.round(value * factor) / factor;\n\t};\n\n\tSpacebrewDanceGame.prototype.startClickHandler = function() {\n\t\tthis.setSubstate(Constants.DANCE_PAD_GAME_GAME);\n\t};\n\n\tSpacebrewDanceGame.prototype.stopClickHandler = function() {\n\t\tthis.setSubstate(Constants.DANCE_PAD_GAME_FINISHED);\n\t\tthis.audio.pause();\n\t\tif(this.record) {\n\t\t\tconsole.log(this.recordedKeys);\n\t\t}\n\t};\n\n\tSpacebrewDanceGame.prototype.showCurrentState = function() {\n\t\tconsole.log('showCurrentState', this.substate);\n\t\t$('.substate').removeClass('active');\n\t\tif(this.substate === Constants.DANCE_PAD_GAME_GAME) {\n\t\t\tthis.resetGame();\n\t\t\t$('.substate-game').addClass('active');\n\t\t\tif(this.record) {\n\t\t\t\tthis.recordedKeys = {};\n\t\t\t}\n\t\t\tthis.roundedTime = 0;\n\t\t\tthis.audio.currentTime = 0;\n\t\t\tthis.audio.play();\n\t\t} else if(this.substate === Constants.DANCE_PAD_GAME_FINISHED) {\n\t\t\t$('.substate-finished').addClass('active');\n\t\t\tif(this.record) {\n\t\t\t\tconsole.log(JSON.stringify(this.recordedKeys));\n\t\t\t}\n\t\t} else {\n\t\t\t$('.substate-intro').addClass('active');\n\t\t}\n\t};\n\n\tSpacebrewDanceGame.prototype.resetGame = function() {\n\t\tfor(var key in this.notesByTime) {\n\t\t\tfor (var i = this.notesByTime[key].length - 1; i >= 0; i--) {\n\t\t\t\tthis.notesByTime[key][i].correct = false;\n\t\t\t\tthis.notesByTime[key][i].tweening = false;\n\t\t\t}\n\t\t}\n\t\tthis.setScore(0.5);\n\t};\n\n\tSpacebrewDanceGame.prototype.onTick = function(event) {\n\t\tif(this.loader.loaded) {\n\t\t\t//show button states\n\t\t\tvar noteName;\n\t\t\tvar note;\n\t\t\tfor (var i = this.noteNames.length - 1; i >= 0; i--) {\n\t\t\t\tnoteName = this.noteNames[i];\n\t\t\t\tvar isDown = (this.pressedButtons.indexOf(noteName) !== -1);\n\t\t\t\tif(isDown) {\n\t\t\t\t\tthis.noteNameMap[noteName].transparentButton.gotoAndStop(this.noteNameMap[noteName].color + \"-outline\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.noteNameMap[noteName].transparentButton.gotoAndStop(\"neutral-outline\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.substate !== Constants.DANCE_PAD_GAME_INTRO) {\n\t\t\t\tthis.roundedTime = this.round(this.audio.currentTime, 1);\n\t\t\t\tvar timeWithOffset = this.round(this.roundedTime + this.timeToReachTarget, 1);\n\t\t\t\tif(this.notesByTime[timeWithOffset]) {\n\t\t\t\t\tfor (var j = this.notesByTime[timeWithOffset].length - 1; j >= 0; j--) {\n\t\t\t\t\t\tvar noteByTime = this.notesByTime[timeWithOffset][j];\n\t\t\t\t\t\tif(!noteByTime.tweening) {\n\t\t\t\t\t\t\tnoteByTime.tweening = true;\n\t\t\t\t\t\t\tvar mappedNote = this.noteNameMap[noteByTime.name];\n\t\t\t\t\t\t\tnote = new DanceGameButton(this.buttonsSheet, mappedNote.color, mappedNote.orientation);\n\t\t\t\t\t\t\tnote.time = timeWithOffset;\n\t\t\t\t\t\t\tnote.noteByTime = noteByTime;\n\t\t\t\t\t\t\tnote.sprite.y = this.canvas.height;\n\t\t\t\t\t\t\tmappedNote.container.addChild(note.sprite);\n\t\t\t\t\t\t\tthis.tweeningNotes.push(note);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar visibleTweeningNotes = [];\n\t\t\t\tvar min = this.roundedTime - this.tolerance;\n\n\t\t\t\tvar speed = event.delta/1000*this.pixelsPerSecond;\n\n\t\t\t\tfor (var k = this.tweeningNotes.length - 1; k >= 0; k--) {\n\t\t\t\t\tnote = this.tweeningNotes[k];\n\t\t\t\t\tnote.update(speed);\n\t\t\t\t\t//check state\n\t\t\t\t\tif(note.noteByTime.correct) {\n\t\t\t\t\t\tif(note.state !== DanceGameButton.STATE_CORRECT) {\n\t\t\t\t\t\t\tnote.setState(DanceGameButton.STATE_CORRECT);\n\t\t\t\t\t\t\tthis.increaseScore();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(note.time < min) {\n\t\t\t\t\t\t\tif(note.state !== DanceGameButton.STATE_WRONG) {\n\t\t\t\t\t\t\t\tnote.setState(DanceGameButton.STATE_WRONG);\n\t\t\t\t\t\t\t\tthis.decreaseScore();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(note.sprite.y > -100) {\n\t\t\t\t\t\tvisibleTweeningNotes.push(note);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnote.sprite.parent.removeChild(note.sprite);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.tweeningNotes = visibleTweeningNotes;\n\t\t\t}\n\t\t\tthis.scoreBar.update();\n\t\t}\n\t\tthis.stage.update();\n\t};\n\n\tSpacebrewDanceGame.prototype.increaseScore = function() {\n\t\tthis.setScore(this.score + 0.1);\n\t};\n\n\tSpacebrewDanceGame.prototype.decreaseScore = function() {\n\t\tthis.setScore(this.score - 0.1);\n\t};\n\n\tSpacebrewDanceGame.prototype.setScore = function(value) {\n\t\tvalue = Math.min(1, Math.max(0, value));\n\t\tif(value !== this.score) {\n\t\t\tthis.score = value;\n\t\t\tif(this.scoreBar) {\n\t\t\t\tthis.scoreBar.setScore(this.score);\n\t\t\t}\n\t\t}\n\t};\n\n\tSpacebrewDanceGame.prototype.keydownHandler = function(event) {\n\t\tswitch(event.keyCode) {\n\t\t\tcase 90: //z - blue up\n\t\t\t\treturn this.handleButton('blue-up', true);\n\t\t\tcase 83: //s - blue down\n\t\t\t\treturn this.handleButton('blue-down', true);\n\t\t\tcase 81: //q - blue left\n\t\t\t\treturn this.handleButton('blue-left', true);\n\t\t\tcase 79: //o - orange up\n\t\t\t\treturn this.handleButton('orange-up', true);\n\t\t\tcase 76: //l - orange down\n\t\t\t\treturn this.handleButton('orange-down', true);\n\t\t\tcase 77: //m - orange right\n\t\t\t\treturn this.handleButton('orange-right', true);\n\t\t}\n\t};\n\n\tSpacebrewDanceGame.prototype.keyupHandler = function(event) {\n\t\tswitch(event.keyCode) {\n\t\t\tcase 90: //z - blue up\n\t\t\t\treturn this.handleButton('blue-up', false);\n\t\t\tcase 83: //s - blue down\n\t\t\t\treturn this.handleButton('blue-down', false);\n\t\t\tcase 81: //q - blue left\n\t\t\t\treturn this.handleButton('blue-left', false);\n\t\t\tcase 79: //o - orange up\n\t\t\t\treturn this.handleButton('orange-up', false);\n\t\t\tcase 76: //l - orange down\n\t\t\t\treturn this.handleButton('orange-down', false);\n\t\t\tcase 77: //m - orange right\n\t\t\t\treturn this.handleButton('orange-right', false);\n\t\t}\n\t};\n\n\tSpacebrewDanceGame.prototype.handleButton = function(name, isDown) {\n\t\tvar index = this.pressedButtons.indexOf(name);\n\t\tif(isDown) {\n\t\t\tif(index === -1) {\n\t\t\t\tthis.pressedButtons.push(name);\n\t\t\t\tif(this.record) {\n\t\t\t\t\tif(!this.recordedKeys[this.roundedTime]) {\n\t\t\t\t\t\tthis.recordedKeys[this.roundedTime] = [];\n\t\t\t\t\t}\n\t\t\t\t\tthis.recordedKeys[this.roundedTime].push({name: name});\n\t\t\t\t}\n\t\t\t\t//is it on the right time?\n\t\t\t\tvar min = this.round(this.roundedTime - this.tolerance, 1);\n\t\t\t\tvar max = this.round(this.roundedTime + this.tolerance, 1);\n\t\t\t\tfor(var i = min; i < max; i+= 0.1) {\n\t\t\t\t\tvar note = this.getNoteByTimeAndName(i, name);\n\t\t\t\t\tif(note) {\n\t\t\t\t\t\tthis.handleCorrectButtonPress(i, name);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif(index !== -1) {\n\t\t\t\tthis.pressedButtons.splice(index, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tSpacebrewDanceGame.prototype.getNoteByTimeAndName = function(time, name) {\n\t\ttime = this.round(time, 1);\n\t\tif(this.notesByTime[time]) {\n\t\t\tfor (var i = this.notesByTime[time].length - 1; i >= 0; i--) {\n\t\t\t\tif(this.notesByTime[time][i].name === name) {\n\t\t\t\t\treturn this.notesByTime[time][i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\tSpacebrewDanceGame.prototype.handleCorrectButtonPress = function(time, name) {\n\t\t//flag it as correct\n\t\tvar note = this.getNoteByTimeAndName(time, name);\n\t\tnote.correct = true;\n\t};\n\n\tSpacebrewDanceGame.prototype.resizeHandler = function() {\n\t\t//resize the canvas\n\t\tvar w = this.canvas.width = window.innerWidth;\n\t\tvar h = this.canvas.height = window.innerHeight;\n\n\t\tvar hc = w / 2;\n\t\tvar vc = h / 2;\n\n\t\tthis.pixelsPerSecond = this.speed * this.fps;\n\t\tthis.timeToReachTarget = this.round(vc / this.pixelsPerSecond, 1);\n\n\t\tif(this.loader.loaded) {\n\t\t\tthis.transparentBlueLeftButton.sprite.y = this.transparentBlueUpButton.sprite.y = this.transparentBlueDownButton.sprite.y = this.transparentOrangeRightButton.sprite.y = this.transparentOrangeUpButton.sprite.y = this.transparentOrangeDownButton.sprite.y = vc;\n\n\t\t\tthis.transparentBlueLeftButton.sprite.x = this.blueLeftContainer.x = hc - 500;\n\t\t\tthis.transparentBlueUpButton.sprite.x = this.blueUpContainer.x = hc - 350;\n\t\t\tthis.transparentBlueDownButton.sprite.x = this.blueDownContainer.x = hc - 200;\n\n\t\t\tthis.transparentOrangeDownButton.sprite.x = this.orangeDownContainer.x = hc + 200;\n\t\t\tthis.transparentOrangeUpButton.sprite.x = this.orangeUpContainer.x = hc + 350;\n\t\t\tthis.transparentOrangeRightButton.sprite.x = this.orangeRightContainer.x = hc + 500;\n\n\t\t\tthis.scoreBar.display.x = hc - 261;\n\t\t\tthis.scoreBar.display.y = 100;\n\t\t}\n\t};\n\n\treturn SpacebrewDanceGame;\n\n})();","/*\n * http://codepen.io/MIML/pen/iBKyC?editors=001\n */\nvar requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;// jshint ignore:line\nwindow.requestAnimationFrame = requestAnimationFrame;\n\nvar maxLifeTime = 5000;\n\nfunction Smoke(x, y, index) {\n\tthis.x = x;\n  this.y = y;\n\n  this.size = 1;\n  this.startSize = 32;\n  this.endSize = 60;\n\n  this.angle = Math.random() * 359;\n\n  this.startLife = new Date().getTime();\n  this.lifeTime = 0;\n\n  this.velY = -2 - (Math.random()*0.5);\n  this.velX = Math.floor(Math.random() * (-4) + 2) / 10;\n}\n\nSmoke.prototype.update = function() {\n\tthis.lifeTime = new Date().getTime() - this.startLife;\n  this.angle += 0.2;\n  \n  var lifePerc = ((this.lifeTime / maxLifeTime) * 100);\n\n  this.size = this.startSize + ((this.endSize - this.startSize) * lifePerc * 0.1);\n\n  this.alpha = 1 - (lifePerc * 0.01);\n  this.alpha = Math.max(this.alpha, 0);\n  \n  this.x += this.velX;\n  this.y += this.velY;\n};\n\nfunction SmokeCanvas(canvas) {\n\tthis.fps = 60;\n\tthis.width = 0;\n\tthis.height = 0;\n\n\tthis.parts = [];\n\tthis.minSpawnTime = 200;\n\tthis.lastTime = new Date().getTime();\n\tthis.emitterX = 500;\n\tthis.emitterY = 380;\n\tthis.smokeImage = new Image();\n\n\tthis.canvas = canvas;\n\tthis.canvas.width = window.innerWidth;\n\tthis.canvas.height = window.innerHeight;\n\tthis.ctx = this.canvas.getContext('2d');\n\n\tmaxLifeTime = Math.min(3000, (this.canvas.height/(1.5*60)*1000));\n\n\tvar that = this;\n\tthis.smokeImage.src = \"images/smoke.png\";\n\tthis.smokeImage.onload = function () {\n\t    that.render();\n\t};\n}\n\nSmokeCanvas.prototype.render = function() {\n\tvar len = this.parts.length;\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    while (len--) {\n        if (this.parts[len].y < 0 || this.parts[len].lifeTime > maxLifeTime) {\n            this.parts.splice(len, 1);\n        } else {\n            this.parts[len].update();\n\n            this.ctx.save();\n            var offsetX = -this.parts[len].size/2,\n                offsetY = -this.parts[len].size/2;\n         \n            this.ctx.translate(this.parts[len].x-offsetX, this.parts[len].y-offsetY);\n            this.ctx.rotate(this.parts[len].angle / 180 * Math.PI);\n            this.ctx.globalAlpha  = this.parts[len].alpha;\n            this.ctx.drawImage(this.smokeImage, offsetX,offsetY, this.parts[len].size, this.parts[len].size);\n            this.ctx.restore();\n        }\n    }\n    this.spawn();\n    requestAnimationFrame($.proxy(this.render, this));\n};\n\nSmokeCanvas.prototype.spawn = function() {\n\tvar now = new Date().getTime();\n\tif(now > this.lastTime - this.minSpawnTime) {\n\t\tthis.lastTime = now;\n\t\tthis.parts.push(new Smoke(this.emitterX, this.emitterY));\n\t}\n};\n\nmodule.exports = SmokeCanvas;","module.exports = (function(){\n\tvar ContentBase = require('../ContentBase');\n\n\tfunction VideoSlide(name) {\n\t\tContentBase.call(this, name);\n\n\t\tthis.videoPlaying = false;\n\n\t\tthis.video = $('video')[0];\n\t\t$(this.video).on('click', this.clickHandler.bind(this));\n\t}\n\n\tVideoSlide.prototype = Object.create(ContentBase.prototype);\n\n\tVideoSlide.prototype.clickHandler = function(event) {\n\t\tthis.videoPlaying = !this.videoPlaying;\n\t\tif(this.videoPlaying) {\n\t\t\tthis.video.play();\n\t\t} else {\n\t\t\tthis.video.pause();\n\t\t}\n\t};\n\n\treturn VideoSlide;\n\n})();"]}
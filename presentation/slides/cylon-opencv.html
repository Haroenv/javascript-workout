<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="../css/style.css">
  <script>
    window.requireNode = window.require;
    window.require = undefined;
  </script>
	<style>
	.CodeMirrorWrapper {
		width: 80%;
	}
	</style>
</head>
<body class="slide vertical-center">
	<div class="content">
		<div class="CodeMirrorWrapper">
      <textarea id="code">var Cylon = require('cylon');
var robot = Cylon.robot({
  connections: {
    arduino: {
      adaptor: 'firmata', port: '/dev/tty.usbmodem14111',
      devices: {
        servo:    { driver: 'servo', pin: 11 },
      }
    },
    opencv: {
      adaptor: 'opencv',
      devices: {
        camera: {
          driver: 'camera',
          camera: 1,
          haarcascade: __dirname + "/haarcascade_frontalface_alt.xml"
        }
      }
    }
  },
  work: function(my) {
    var angle = 0;
    my.camera.once('cameraReady', function() {
      my.camera.on('facesDetected', function(err, im, faces) {
        if(faces.length > 0) {
          console.log(faces.length, faces[0].x);
          angle = (faces[0].x).fromScale(1024, 0).toScale(0, 180);
          my.servo.angle(angle);
        }
        my.camera.readFrame();
      });
      my.camera.on('frameReady', function(err, im) {
        my.camera.detectFaces(im);
      });
      my.camera.readFrame();
    });
  }
}).start();</textarea>
		</div>
		<button class="btn btn-default btn-save">Save</button>
    <button class="btn btn-default btn-run">Run</button>
	</div>
  <script src="../js/vendors.min.js"></script>
  <script src="../js/script.min.js"></script>
  <script>
  (function(){
    var ChildAppEditor = require('slides/ChildAppEditor');
    new ChildAppEditor('cylon-opencv', 'node');
  })();
  </script>
</body>
</html>
require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"kLUUT7":[function(require,module,exports){
module.exports = (function(){
	
	var Constants = {
		GO_TO_PREVIOUS_SLIDE : 'goToPreviousSlide',
		GO_TO_NEXT_SLIDE : 'goToNextSlide',
		SET_CURRENT_SLIDE_INDEX : 'setCurrentSlideIndex',

		ROLE_PRESENTATION : 'presentation',
		ROLE_MOBILE : 'mobile',

		STATE_ACTIVE : 'active',
		STATE_INACTIVE : 'inactive',

		SET_SUBSTATE : 'setSubstate',

		SHAKE_YOUR_PHONES_INTRO : 'shakeYourPhonesIntro',
		SHAKE_YOUR_PHONES_GAME : 'shakeYourPhonesGame',
		SHAKE_YOUR_PHONES_FINISHED : 'shakeYourPhonesFinished',

		SHAKE_YOUR_PHONES_CLIENT_ADDED : 'shakeYourPhonesClientAdded',
		SHAKE_YOUR_PHONES_CLIENT_REMOVED : 'shakeYourPhonesClientRemoved',
		SHAKE_YOUR_PHONES_CLIENT_LIST : 'shakeYourPhonesClientList',
		SHAKE_YOUR_PHONES_CLIENT_UPDATE : 'shakeYourPhonesClientUpdate',

		HIGHEST_HEARTRATE_GAME_INTRO : 'highestHeartrateGameIntro',
		HIGHEST_HEARTRATE_GAME_GAME : 'highestHeartrateGameGame',
		HIGHEST_HEARTRATE_GAME_FINISHED : 'highestHeartrateGameFinished',

		LOWEST_HEARTRATE_GAME_INTRO : 'lowestHeartrateGameIntro',
		LOWEST_HEARTRATE_GAME_GAME : 'lowestHeartrateGameGame',
		LOWEST_HEARTRATE_GAME_FINISHED : 'lowestHeartrateGameFinished',

		REACT_PHONES_INTRO : 'reactPhonesIntro',
		REACT_PHONES_GAME : 'reactPhonesGame',
		REACT_PHONES_FINISHED : 'reactPhonesFinished',

		REACT_PHONES_CLIENT_ADDED : 'reactPhonesClientAdded',
		REACT_PHONES_CLIENT_REMOVED : 'reactPhonesClientRemoved',
		REACT_PHONES_CLIENT_LIST : 'reactPhonesClientList',
		REACT_PHONES_CLIENT_UPDATE : 'reactPhonesClientUpdate',

		DANCE_PAD_GAME_INTRO : 'dancePadGameIntro',
		DANCE_PAD_GAME_GAME : 'dancePadGameGame',
		DANCE_PAD_GAME_FINISHED : 'dancePadGameFinished',

		UPDATE_MAXIMUM_MOTION : 'updateMaximumMotion',
		UPDATE_REACTION_SPEED : 'updateReactionSpeed',
		HEART_RATE_POLAR : 'heartRatePolar',
		HEART_RATE_SPARK : 'heartRateSpark',
		SELECT_WINNER : 'selectWinner',
		BLINK : 'blink',

		TWEET : 'tweet',
		GET_ALL_TWEETS : 'getAllTweets',
		GET_ALL_TWEETS_RESULT : 'getAllTweetsResult',

		CHILD_APP_SAVE_CODE : 'childAppSaveCode',
		CHILD_APP_RUN_CODE : 'childAppRunCode',
		OPEN_COMMAND_LINE: 'openCommandLine',
		OPEN_CAMERA: 'openCamera'
	};

	return Constants;

})();
},{}],"Constants":[function(require,module,exports){
module.exports=require('kLUUT7');
},{}],3:[function(require,module,exports){
module.exports = (function(){
	var Class = require('core/Class');
	var Slide = require('./Slide');
	var Constants = require('Constants');

	var Presentation = Class.extend({
		currentSlideIndex: 0,
		socket: false,
		iframes: [],
		numIframes: 3,
		slides: [],
		$overlay: false,
		init: function() {
			console.log("[Presentation] init");

			this.createIframes();
			this.login();
			this.$overlay = $('#overlay');
			$('body').on(Constants.BLINK, $.proxy(this.blinkHandler, this));
		},

		createIframes: function() {
			for(var i = 0; i < this.numIframes; i++) {
				var $iframe = $('<iframe class="slide-frame" />');
				this.iframes.push($iframe);
				$('#presentation').append($iframe);
			}
		},

		login: function() {
			var that = this;
			$.post('/login', {
			}).done(function(result){
				that.slides = [];
				var numSlides = result.slides.length;
				for(var i = 0; i < numSlides; i++) {
					that.slides.push(new Slide(result.slides[i]));
				}
				that.connectSocket(result.token);
			});
		},

		connectSocket: function(token) {
			this.token = token;
			this.socket = io.connect('/', {
				query: 'token=' + token
			});
			this.socket.on('connect', $.proxy(this.socketConnectHandler, this));
			this.socket.on('disconnect', $.proxy(this.socketDisconnectHandler, this));
			this.socket.on('currentSlideIndexChanged', $.proxy(this.currentSlideIndexChangedHandler, this));
			this.socket.on(Constants.BLINK, $.proxy(this.blinkHandler, this, {}));
		},

		socketConnectHandler: function() {
		},

		socketDisconnectHandler: function() {
		},

		blinkHandler: function(event, text, backgroundColor) {
			console.log(text, backgroundColor);
			if(text instanceof Array && text.length > 1) {
				console.log('split it');
				backgroundColor = text[1];
				text = text[0];
			}
			console.log(text, backgroundColor);
			//overlay important, blinking text
			this.$overlay.find('.content').html(text);
			this.$overlay.addClass('active');
			if(this.blinkInterval) {
				clearInterval(this.blinkInterval);
			}
			this.blinkInterval = setInterval($.proxy(this.blinkToggle, this, backgroundColor), 500);
		},

		blinkToggle: function(backgroundColor) {
			this.$overlay.toggleClass('blink-on');
			if(this.$overlay.hasClass('blink-on')) {
				this.$overlay.css('background-color', backgroundColor);
			} else {
				this.$overlay.css('background-color', false);
			}
		},

		currentSlideIndexChangedHandler: function(currentSlideIndex) {
			this.$overlay.removeClass('active');
			if(this.blinkInterval) {
				clearInterval(this.blinkInterval);
			}
			currentSlideIndex = parseInt(currentSlideIndex);
			this.currentSlideIndex = currentSlideIndex;
			var currentSlide = this.getSlideByIndex(currentSlideIndex);
			var previousSlide = this.getSlideByIndex(currentSlideIndex - 1);
			var nextSlide = this.getSlideByIndex(currentSlideIndex + 1);
			//
			var currentIframe = this.getIframeForSlide(currentSlide, [previousSlide, nextSlide]);
			if(currentIframe) {
				if(currentSlide.data.mobile && currentSlide.data.mobile.url) {
					currentSlide.attachToIframe(currentIframe, currentSlide.data.mobile.url);
				} else {
					currentSlide.attachToIframe(currentIframe, "slides/" + currentSlide.name + '.html?token=' + this.token);
				}
				currentSlide.setState(Constants.STATE_ACTIVE);
				$(currentIframe).css('left', 0);
			}
			var previousIframe = this.getIframeForSlide(previousSlide, [currentSlide, nextSlide]);
			if(previousIframe) {
				if(previousSlide.data.mobile && previousSlide.data.mobile.url) {
					previousSlide.attachToIframe(previousIframe, previousSlide.data.mobile.url);
				} else {
					previousSlide.attachToIframe(previousIframe, "slides/" + previousSlide.name + '.html?token=' + this.token);
				}
				previousSlide.setState(Constants.STATE_INACTIVE);
				$(previousIframe).css('left', '-100%');
			}
			var nextIframe = this.getIframeForSlide(nextSlide, [previousSlide, currentSlide]);
			if(nextIframe) {
				if(nextSlide.data.mobile && nextSlide.data.mobile.url) {
					nextSlide.attachToIframe(nextIframe, nextSlide.data.mobile.url);
				} else {
					nextSlide.attachToIframe(nextIframe, "slides/" + nextSlide.name + '.html?token=' + this.token);
				}
				nextSlide.setState(Constants.STATE_INACTIVE);
				$(nextIframe).css('left', '100%');
			}
		},

		getSlideByIndex: function(index) {
			if(index >= 0 && index < this.slides.length) {
				return this.slides[index];
			}
			return false;
		},

		getIframeForSlide: function(slide, slidesNotToClear) {
			if(slide) {
				var $iframe = $('iframe[name=' + slide.name + ']');
				if($iframe.length > 0) {
					return $iframe[0];
				}
				//get a free iframe
				var slideNamesNotToClear = [];
				$(slidesNotToClear).each(function(index, obj){
					slideNamesNotToClear.push(obj.name);
				});
				var $iframes = $('iframe.slide-frame');
				for (var i = $iframes.length - 1; i >= 0; i--) {
					$iframe = $($iframes[i]);
					var name = $iframe.attr('name');
					if(!name || slideNamesNotToClear.indexOf(name) === -1) {
						return $iframe[0];
					}
				}
			}
			return false;
		}
	});

	return Presentation;

})();
},{"./Slide":4,"Constants":"kLUUT7","core/Class":"Hzu0go"}],4:[function(require,module,exports){
module.exports = (function(){
	var Class = require('core/Class');

	var Slide = Class.extend({
		init: function(data) {
			this.data = data;
			this.name = this.data.name;
			this._iframeLoadHandler = $.proxy(this.iframeLoadHandler, this);
		},
		attachToIframe: function(iframe, src) {
			this.iframe = iframe;
			$(iframe).off('load', this._iframeLoadHandler);
			$(iframe).attr('name', this.name);
			if(src !== $(iframe).attr('src')) {
				$(iframe).on('load', this._iframeLoadHandler);
				$(iframe).attr('src', src);
			}
		},
		setState: function(state) {
			this.state = state;
			var w = getIframeWindow(this.iframe);
			if(w && w.setState) {
				w.setState(state);
			}
		},
		iframeLoadHandler: function(event) {
			var w = getIframeWindow(this.iframe);
			if(w && w.setState) {
				w.setState(this.state);
			}
		}
	});

	function getIframeWindow(iframe_object) {
		  var doc;

		  if (iframe_object.contentWindow) {
		    return iframe_object.contentWindow;
		  }

		  if (iframe_object.window) {
		    return iframe_object.window;
		  } 

		  if (!doc && iframe_object.contentDocument) {
		    doc = iframe_object.contentDocument;
		  } 

		  if (!doc && iframe_object.document) {
		    doc = iframe_object.document;
		  }

		  if (doc && doc.defaultView) {
		   return doc.defaultView;
		  }

		  if (doc && doc.parentWindow) {
		    return doc.parentWindow;
		  }

		  return undefined;
		}

	return Slide;

})();
},{"core/Class":"Hzu0go"}],5:[function(require,module,exports){
module.exports = (function(){
	var Class = require('core/Class');
	var Constants = require('Constants');

	var ContentBase = Class.extend({
		fps: 60,
		_animationFrameId: false,
		_currentTime: 0,
		_delta: 0,
		_interval: false,
		_lastTime: new Date().getTime(),
		currentFrame: 0,
		init: function() {
			this.token = $.getUrlVar('token');
			window.setState = $.proxy(this.setState, this);
			this.__drawLoop = $.proxy(this._drawLoop, this);
			this._interval = 1000 / this.fps;
		},
		setState: function(state) {
			if(state !== this.state) {
				this.state = state;
				this.onStateChanged();
				if(this.state === Constants.STATE_ACTIVE) {
					this.currentFrame = 0;
					this._drawLoop();
				} else {
					window.cancelAnimationFrame(this._animationFrameId);
				}
			}
		},
		onStateChanged: function() {
		},
		triggerEventOnParent: function() {
			var args = Array.prototype.slice.call(arguments);
			parent.$('body').trigger.apply(parent.$('body'), args);
		},
		_drawLoop: function() {
			this._animationFrameId = window.requestAnimationFrame(this.__drawLoop);
			this._currentTime = (new Date()).getTime();
		    this._delta = (this._currentTime - this._lastTime);
		    if(this._delta > this._interval) {
		    	this.currentFrame++;
		    	this.drawLoop();
		    	this._lastTime = this._currentTime - (this._delta % this._interval);
		    }
		},
		drawLoop: function() {
		}
	});

	return ContentBase;

})();
},{"Constants":"kLUUT7","core/Class":"Hzu0go"}],"sgWrnX":[function(require,module,exports){
module.exports = (function(){
	var ContentBase = require('../ContentBase');
	var Constants = require('Constants');

	var ReactPhones = ContentBase.extend({
		totalReactionSpeed: 0,
		numReactionSpeeds: 0,
		numCorrectAnswers: 1,
		averageReactionSpeed: 9999999,
		visiblePosition: 0,
		targetPosition: 0,
		lastAnswerTime: new Date(),
		positions: [],
		init: function() {
			this._super();
			console.log('[Mobile] react phones init');

			this.$game = $('#game');
			this.$slidesContainer = $('.react-phones-slides-container');
			this.$slide1 = $('.react-phones-slide-1');
			this.$slide1text = $('.react-phones-slide-1 .react-phones-slide-text');
			this.$slide2 = $('.react-phones-slide-2');
			this.$slide2text = $('.react-phones-slide-2 .react-phones-slide-text');

			this.socket = io.connect('/', {
				query: 'token=' + this.token + "&slide=react-phones"
			});

			this._socketConnectHandler = $.proxy(this.socketConnectHandler, this);
			this._socketDisconnectHandler = $.proxy(this.socketDisconnectHandler, this);
			this._setSubstateHandler = $.proxy(this.setSubstateHandler, this);

			this.socket.on('connect', this._socketConnectHandler);
			this.socket.on('disconnect', this._socketDisconnectHandler);
			this.socket.on(Constants.SET_SUBSTATE, this._setSubstateHandler);
			this.socket.on(Constants.BLINK, $.proxy(this.triggerEventOnParent, this, Constants.BLINK));

			$('.touch .touchbutton').on('touchstart', $.proxy(this.onButtonTouchStart, this));
			$('.touch .touchbutton').on('touchend', $.proxy(this.onButtonTouchEnd, this));

			$('.no-touch .touchbutton').on('mousedown', $.proxy(this.onButtonTouchStart, this));
			$('.no-touch .touchbutton').on('mouseup', $.proxy(this.onButtonTouchEnd, this));

			this.resetGame();
		},

		onButtonTouchStart: function(e) {
			$(e.currentTarget).addClass('down');
			this.selectAnswer($(e.currentTarget).text());
		},

		onButtonTouchEnd: function(e) {
			$(e.currentTarget).removeClass('down');
		},

		selectAnswer: function(answer) {
			var now = new Date();
			var time = now.getTime() - this.lastAnswerTime.getTime();
			this.totalReactionSpeed += time;
			if(answer.toLowerCase() === this.positions[this.targetPosition].colorString.toLowerCase()) {
				//correct answer
				this.numCorrectAnswers++;
			} else {
				//penalty time
				this.totalReactionSpeed += 1000;
			}
			this.numReactionSpeeds++;
			this.lastAnswerTime = now;
			this.targetPosition++;
			this.fillPositionsWhenNeeded();
			//send to server
			this.socket.emit(Constants.UPDATE_REACTION_SPEED, this.totalReactionSpeed / this.numCorrectAnswers);
		},

		onStateChanged: function() {
			if(this.state === Constants.STATE_ACTIVE) {
				this.resetGame();
			}
		},

		resetGame: function() {
			this.lastAnswerTime = new Date();
			this.totalReactionSpeed = 0;
			this.numReactionSpeeds = 0;
			this.numCorrectAnswers = 1;
			this.averageReactionSpeed = 9999999;
			this.visiblePosition = 0;
			this.targetPosition = 0;
			this.positions = [];
			this.fillPositionsWhenNeeded();
		},

		fillPositionsWhenNeeded: function() {
			var numPositionsToAdd = this.numReactionSpeeds + 2 - this.positions.length;
			for(var i = 0; i < numPositionsToAdd; i++) {
				var position = {
					colorString: (Math.random() > 0.5) ? 'red' : 'blue',
					bgcolor: (Math.random() > 0.5) ? '#c6363d' : '#0684AF'
				};
				if(position.colorString === 'red') {
					position.color = '#c6363d';
				} else {
					position.color = '#0684AF';
				}
				this.positions.push(position);
			}
		},

		socketConnectHandler: function() {
		},

		socketDisconnectHandler: function() {
		},

		setSubstateHandler: function(substate) {
			if(this.substate !== substate) {
				this.substate = substate;
				this.showCurrentState();
			}
		},

		drawLoop: function() {
			this.visiblePosition += (this.targetPosition - this.visiblePosition) * 0.1;
			if(this.visiblePosition % 1 > 0.995) {
				this.visiblePosition = Math.round(this.visiblePosition);
			}
			this.$slidesContainer.css('left', this.visiblePosition * -100 + '%');

			var flooredVisiblePosition = Math.floor(this.visiblePosition);
			if(flooredVisiblePosition % 2 === 0) {
				this.$slide1.css({
					'left' : flooredVisiblePosition * 100 + '%',
					'background-color' : this.positions[flooredVisiblePosition].bgcolor
				});
				this.$slide2.css({
					'left' : flooredVisiblePosition * 100 + 100 + '%',
					'background-color' : this.positions[flooredVisiblePosition+1].bgcolor
				});

				this.$slide1text.text(this.positions[flooredVisiblePosition].colorString);
				this.$slide2text.text(this.positions[flooredVisiblePosition+1].colorString);
			} else {
				this.$slide2.css({
					'left' : flooredVisiblePosition * 100 + '%',
					'background-color' : this.positions[flooredVisiblePosition].bgcolor
				});
				this.$slide1.css({
					'left' : flooredVisiblePosition * 100 + 100 + '%',
					'background-color' : this.positions[flooredVisiblePosition+1].bgcolor
				});

				this.$slide2text.text(this.positions[flooredVisiblePosition].colorString);
				this.$slide1text.text(this.positions[flooredVisiblePosition+1].colorString);
			}
		},

		showCurrentState: function() {
			$('.substate').removeClass('active');
			this.$game.css({
				'z-index': -1,
				'opacity': 0.3
			});
			if(this.substate === Constants.REACT_PHONES_GAME) {
				$('.substate-game').addClass('active');
				this.$game.css({
					'z-index': 10,
					'opacity': 1
				});
			} else if(this.substate === Constants.REACT_PHONES_FINISHED) {
				$('.substate-finished').addClass('active');
			} else {
				$('.substate-intro').addClass('active');
			}
		}
	});

	return ReactPhones;

})();
},{"../ContentBase":5,"Constants":"kLUUT7"}],"classes/content/react-phones":[function(require,module,exports){
module.exports=require('sgWrnX');
},{}],"classes/content/shake-your-phones":[function(require,module,exports){
module.exports=require('oLqZeW');
},{}],"oLqZeW":[function(require,module,exports){
module.exports = (function(){
	var ContentBase = require('../ContentBase');
	var Constants = require('Constants');

	var ShakeYourPhones = ContentBase.extend({
		currentMotion: 0,
		motion: 0,
		maximumMotion: 0,
		init: function() {
			this._super();
			console.log('[Mobile] shake your phones init');

			this.$background = $('.background');
			this.$background.css('top', '100%');
			this.$background.css('background-color', 'red');

			this.socket = io.connect('/', {
				query: 'token=' + this.token + "&slide=shake-your-phones"
			});

			this._motionUpdateHandler = $.proxy(this.motionUpdateHandler, this);

			this._socketConnectHandler = $.proxy(this.socketConnectHandler, this);
			this._socketDisconnectHandler = $.proxy(this.socketDisconnectHandler, this);
			this._setSubstateHandler = $.proxy(this.setSubstateHandler, this);

			this.socket.on('connect', this._socketConnectHandler);
			this.socket.on('disconnect', this._socketDisconnectHandler);
			this.socket.on(Constants.SET_SUBSTATE, this._setSubstateHandler);
			this.socket.on(Constants.BLINK, $.proxy(this.triggerEventOnParent, this, Constants.BLINK));
		},

		onStateChanged: function() {
			if(this.state === Constants.STATE_ACTIVE) {
				this.maximumMotion = 0;
				if (window.DeviceMotionEvent) {
					window.addEventListener('devicemotion', this._motionUpdateHandler, false);
				} else {
					$('.acceleration').text('Not supported on your device :-(');
				}
			} else {
				window.removeEventListener('devicemotion', this._motionUpdateHandler);
			}
		},

		socketConnectHandler: function() {
		},

		socketDisconnectHandler: function() {
		},

		setSubstateHandler: function(substate) {
			if(this.substate !== substate) {
				this.substate = substate;
				this.showCurrentState();
			}
		},

		motionUpdateHandler: function(event) {
			this.currentMotion = event.interval * (Math.abs(event.acceleration.x) + Math.abs(event.acceleration.y) + Math.abs(event.acceleration.z));
		},

		drawLoop: function() {
			this.motion += this.currentMotion;
			this.motion *= 0.97;
			this.$background.css('top', 100 - this.motion + '%');
			this.maximumMotion = Math.max(this.maximumMotion, this.motion);
			if(this.currentFrame % 10 === 0 && this.maximumMotion !== this.lastSentMaximumMotion) {
				this.lastSentMaximumMotion = this.maximumMotion;
				this.socket.emit(Constants.UPDATE_MAXIMUM_MOTION, this.maximumMotion);
			}
		},

		showCurrentState: function() {
			$('.substate').removeClass('active');
			if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {
				$('.substate-game').addClass('active');
			} else if(this.substate === Constants.SHAKE_YOUR_PHONES_FINISHED) {
				$('.substate-finished').addClass('active');
			} else {
				$('.substate-intro').addClass('active');
			}
		}
	});

	return ShakeYourPhones;

})();
},{"../ContentBase":5,"Constants":"kLUUT7"}],10:[function(require,module,exports){
(function(){

	function init() {
		if($('#presentation').length > 0) {
			var Presentation = require('./classes/Presentation');
			new Presentation();
		}
	}

	init();

})();
},{"./classes/Presentation":3}],"Hzu0go":[function(require,module,exports){
/* jshint ignore:start */
/* Simple JavaScript Inheritance
 * By John Resig http://ejohn.org/
 * MIT Licensed.
 */
// Inspired by base2 and Prototype
module.exports = (function(){
	var initializing = false, fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.*/;

	// The base Class implementation (does nothing)
	this.Class = function(){};

	// Create a new Class that inherits from this class
	Class.extend = function(prop) {
		var _super = this.prototype;

		// Instantiate a base class (but only create the instance,
		// don't run the init constructor)
		initializing = true;
		var prototype = new this();
		initializing = false;

		// Copy the properties over onto the new prototype
		for (var name in prop) {
			// Check if we're overwriting an existing function
			prototype[name] = typeof prop[name] == "function" &&
				typeof _super[name] == "function" && fnTest.test(prop[name]) ?
				(function(name, fn){
					return function() {
						var tmp = this._super;

						// Add a new ._super() method that is the same method
						// but on the super-class
						this._super = _super[name];

						// The method only need to be bound temporarily, so we
						// remove it when we're done executing
						var ret = fn.apply(this, arguments);
						this._super = tmp;

						return ret;
					};
				})(name, prop[name]) :
				prop[name];
		}

		// The dummy class constructor
		function Class() {
			// All construction is actually done in the init method
			if ( !initializing && this.init )
				this.init.apply(this, arguments);
		}

		// Populate our constructed prototype object
		Class.prototype = prototype;

		// Enforce the constructor to be what we expect
		Class.prototype.constructor = Class;

		// And make this class extendable
		Class.extend = arguments.callee;

		return Class;
	};
	return Class;
})();
/* jshint ignore:end */
},{}],"core/Class":[function(require,module,exports){
module.exports=require('Hzu0go');
},{}]},{},[10])